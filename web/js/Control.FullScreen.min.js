(function(){L.Control.FullScreen=L.Control.extend({options:{position:"topleft",title:"Full Screen",forceSeparateButton:false,forcePseudoFullscreen:false},onAdd:function(h){var f="leaflet-control-zoom-fullscreen",e,g="";if(h.zoomControl&&!this.options.forceSeparateButton){e=h.zoomControl._container}else{e=L.DomUtil.create("div","leaflet-bar")}if(this.options.content){g=this.options.content}else{f+=" fullscreen-icon"}this._createButton(this.options.title,f,g,e,this.toggleFullScreen,this);return e},_createButton:function(k,h,j,e,g,f){var i=L.DomUtil.create("a",h,e);i.href="#";i.title=k;i.innerHTML=j;L.DomEvent.addListener(i,"click",L.DomEvent.stopPropagation).addListener(i,"click",L.DomEvent.preventDefault).addListener(i,"click",g,f);L.DomEvent.addListener(e,d.fullScreenEventName,L.DomEvent.stopPropagation).addListener(e,d.fullScreenEventName,L.DomEvent.preventDefault).addListener(e,d.fullScreenEventName,this._handleEscKey,f);L.DomEvent.addListener(document,d.fullScreenEventName,L.DomEvent.stopPropagation).addListener(document,d.fullScreenEventName,L.DomEvent.preventDefault).addListener(document,d.fullScreenEventName,this._handleEscKey,f);return i},toggleFullScreen:function(){var e=this._map;e._exitFired=false;if(e._isFullscreen){if(d.supportsFullScreen&&!this.options.forcePseudoFullscreen){d.cancelFullScreen(e._container.parentElement)}else{L.DomUtil.removeClass(e._container.parentElement,"leaflet-pseudo-fullscreen");$("#sidebar").css({top:"123px",bottom:"50px"}).redraw()}e.invalidateSize();e.fire("exitFullscreen");e._exitFired=true;e._isFullscreen=false}else{if(d.supportsFullScreen&&!this.options.forcePseudoFullscreen){d.requestFullScreen(e._container.parentElement)}else{L.DomUtil.addClass(e._container.parentElement,"leaflet-pseudo-fullscreen");$("#sidebar").css({top:"13px",bottom:"10px"}).redraw()}e.invalidateSize();e.fire("enterFullscreen");e._isFullscreen=true}},_handleEscKey:function(){var e=this._map;if(!d.isFullScreen(e)&&!e._exitFired){e.fire("exitFullscreen");e._exitFired=true;e._isFullscreen=false}}});L.Map.addInitHook(function(){if(this.options.fullscreenControl){this.fullscreenControl=L.control.fullscreen(this.options.fullscreenControlOptions);this.addControl(this.fullscreenControl)}});L.control.fullscreen=function(e){return new L.Control.FullScreen(e)};var d={supportsFullScreen:false,isFullScreen:function(){return false},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},c="webkit moz o ms khtml".split(" ");if(typeof document.exitFullscreen!=="undefined"){d.supportsFullScreen=true}else{for(var b=0,a=c.length;b<a;b++){d.prefix=c[b];if(typeof document[d.prefix+"CancelFullScreen"]!=="undefined"){d.supportsFullScreen=true;break}}}if(d.supportsFullScreen){d.fullScreenEventName=d.prefix+"fullscreenchange";d.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}};d.requestFullScreen=function(e){return(this.prefix==="")?e.requestFullscreen():e[this.prefix+"RequestFullScreen"]()};d.cancelFullScreen=function(e){return(this.prefix==="")?document.exitFullscreen():document[this.prefix+"CancelFullScreen"]()}}if(typeof jQuery!=="undefined"){jQuery.fn.requestFullScreen=function(){return this.each(function(){var e=jQuery(this);if(d.supportsFullScreen){d.requestFullScreen(e)}})}}window.fullScreenApi=d})();