L.LinearFunction=L.Class.extend({options:{constrainX:false},initialize:function(a,b,c){this.setOptions(c);this.setRange(a,b)},_calculateParameters:function(a,b){if(this._xRange===0){this._slope=0;this._b=a.y}else{this._slope=(b.y-a.y)/this._xRange;this._b=a.y-this._slope*a.x}},_arrayToPoint:function(a){return{x:a[0],y:a[1]}},setOptions:function(a){L.Util.setOptions(this,a);this._preProcess=this.options.preProcess;this._postProcess=this.options.postProcess},getBounds:function(){var a=Math.min(this._minPoint.x,this._maxPoint.x);var c=Math.max(this._minPoint.x,this._maxPoint.x);var d=Math.min(this._minPoint.y,this._maxPoint.y);var b=Math.max(this._minPoint.y,this._maxPoint.y);return[new L.Point(a,d),new L.Point(c,b)]},setRange:function(a,b){a=a instanceof Array?this._arrayToPoint(a):a;b=b instanceof Array?this._arrayToPoint(b):b;this._minPoint=a;this._maxPoint=b;this._xRange=b.x-a.x;this._calculateParameters(a,b);return this},setMin:function(a){this.setRange(a,this._maxPoint);return this},setMax:function(a){this.setRange(this._minPoint,a);return this},setPreProcess:function(a){this._preProcess=a;return this},setPostProcess:function(a){this._postProcess=a;return this},constrainX:function(a){a=Number(a);if(this.options.constrainX){a=Math.max(a,this._minPoint.x);a=Math.min(a,this._maxPoint.x)}return a},evaluate:function(a){var b;if(this._preProcess){a=this._preProcess(a)}b=Number((this._slope*a).toFixed(6))+Number(this._b.toFixed(6));if(this._postProcess){b=this._postProcess(b)}return b},random:function(){var a=Math.random()*this._xRange+this._minPoint.x;return this.evaluate(a)},sample:function(d){d=Math.max(d,2);var b=d-1;var e=this._xRange/b;var a=this._minPoint.x;var c=[];while(a<=this._maxPoint.x){c.push(this.evaluate(a));a+=e}return c},samplePoints:function(d){d=Math.max(d,2);var b=d-1;var e=this._xRange/b;var a=this._minPoint.x;var c=[];while(a<=this._maxPoint.x){c.push(new L.Point(a,this.evaluate(a)));a+=e}return c},getIntersectionPoint:function(c){var b=null;if(this._slope!==c._slope){var a=(this._b-c._b)/(c._slope-this._slope);var d=this.evaluate(a);b=new L.Point(a,d)}return b}});L.ColorFunction=L.LinearFunction.extend({options:{alpha:1,includeAlpha:false},initialize:function(a,b,c){L.Util.setOptions(this,c);this._parts=[];this._dynamicPart=null;this._outputPrecision=0;this._prefix=null;this._formatOutput=function(e){return e.toFixed(this._outputPrecision)};this._mapOutput=function(h){var e=[];for(var g=0;g<this._parts.length;++g){var f=this._parts[g];e.push(h[f])}if(this.options.includeAlpha){e.push(this.options.alpha)}return e};this._getColorString=function(f){f=this._formatOutput(f);this.options[this._dynamicPart]=f;var e=this._mapOutput(this.options);return this._writeColor(this._prefix,e)};this._writeColor=function(e,f){if(this.options.includeAlpha){e+="a"}return e+"("+f.join(",")+")"};c=this.options;var d=function(f){if(c&&c.postProcess){f=c.postProcess.call(this,f)}var e=this._getColorString(f);if(((L.Browser.ie)&&e.indexOf("hsl")>-1)||c.rgb){e=L.hslColor(e).toRGBString()}return e};L.LinearFunction.prototype.initialize.call(this,a,b,{preProcess:this.options.preProcess,postProcess:d})}});L.HSLColorFunction=L.ColorFunction.extend({initialize:function(a,b,c){L.ColorFunction.prototype.initialize.call(this,a,b,c);this._parts=["outputHue","outputSaturation","outputLuminosity"];this._prefix="hsl";this._outputPrecision=2}});L.RGBColorFunction=L.ColorFunction.extend({initialize:function(a,b,c){L.ColorFunction.prototype.initialize.call(this,a,b,c);this._parts=["outputRed","outputBlue","outputGreen"];this._prefix="rgb";this._outputPrecision=0}});L.RGBRedFunction=L.LinearFunction.extend({options:{outputGreen:0,outputBlue:0},initialize:function(a,b,c){L.RGBColorFunction.prototype.initialize.call(this,a,b,c);this._dynamicPart="outputRed"}});L.RGBBlueFunction=L.LinearFunction.extend({options:{outputRed:0,outputGreen:0},initialize:function(a,b,c){L.RGBColorFunction.prototype.initialize.call(this,a,b,c);this._dynamicPart="outputBlue"}});L.RGBGreenFunction=L.LinearFunction.extend({options:{outputRed:0,outputBlue:0},initialize:function(a,b,c){L.RGBColorFunction.prototype.initialize.call(this,a,b,c);this._dynamicPart="outputGreen"}});L.RGBColorBlendFunction=L.LinearFunction.extend({initialize:function(d,a,j,g){j=new L.RGBColor(j);g=new L.RGBColor(g);var c=j.r();var b=g.r();var i=j.g();var h=g.g();var f=j.b();var e=g.b();this._minX=d;this._maxX=a;this._redFunction=new L.LinearFunction(new L.Point(d,c),new L.Point(a,b));this._greenFunction=new L.LinearFunction(new L.Point(d,i),new L.Point(a,h));this._blueFunction=new L.LinearFunction(new L.Point(d,f),new L.Point(a,e))},getBounds:function(){var b=this._redFunction.getBounds();var a=this._greenFunction.getBounds();var d=this._blueFunction.getBounds();var e=Math.min(b[0].y,a[0].y,d[0].y);var c=Math.max(b[0].y,a[0].y,d[0].y);return[new L.Point(b[0].x,e),new L.Point(b[1].x,c)]},evaluate:function(a){return new L.RGBColor([this._redFunction.evaluate(a),this._greenFunction.evaluate(a),this._blueFunction.evaluate(a)]).toRGBString()}});L.HSLHueFunction=L.HSLColorFunction.extend({options:{outputSaturation:"100%",outputLuminosity:"50%"},initialize:function(a,b,c){L.HSLColorFunction.prototype.initialize.call(this,a,b,c);this._dynamicPart="outputHue"}});L.HSLSaturationFunction=L.LinearFunction.extend({options:{outputHue:0,outputLuminosity:"50%"},initialize:function(a,b,c){L.HSLColorFunction.prototype.initialize.call(this,a,b,c);this._formatOutput=function(d){return(d*100).toFixed(this._outputPrecision)+"%"};this._dynamicPart="outputSaturation"}});L.HSLLuminosityFunction=L.LinearFunction.extend({options:{outputHue:0,outputSaturation:"100%"},initialize:function(a,b,c){L.HSLColorFunction.prototype.initialize.call(this,a,b,c);this._formatOutput=function(d){return(d*100).toFixed(this._outputPrecision)+"%"};this._dynamicPart="outputLuminosity"}});L.HSLColorBlendFunction=L.LinearFunction.extend({initialize:function(d,a,f,e){f=new L.HSLColor(f);e=new L.HSLColor(e);var h=f.h();var g=e.h();var j=f.s();var i=e.s();var c=f.l();var b=e.l();this._minX=d;this._maxX=a;this._hueFunction=new L.LinearFunction(new L.Point(d,h),new L.Point(a,g));this._saturationFunction=new L.LinearFunction(new L.Point(d,j),new L.Point(a,i));this._luminosityFunction=new L.LinearFunction(new L.Point(d,c),new L.Point(a,b))},getBounds:function(){var a=this._hueFunction.getBounds();var e=this._saturationFunction.getBounds();var b=this._luminosityFunction.getBounds();var d=Math.min(a[0].y,e[0].y,b[0].y);var c=Math.max(a[0].y,e[0].y,b[0].y);return[new L.Point(a[0].x,d),new L.Point(a[1].x,c)]},evaluate:function(a){return new L.HSLColor([this._hueFunction.evaluate(a),this._saturationFunction.evaluate(a),this._luminosityFunction.evaluate(a)]).toHSLString()}});L.PiecewiseFunction=L.LinearFunction.extend({options:{constrainX:true},initialize:function(d,a){L.Util.setOptions(this,a);this._functions=d;var c;var b;c=d[0].getBounds()[0];b=d[d.length-1].getBounds()[1];L.LinearFunction.prototype.initialize.call(this,c,b,{preProcess:this.options.preProcess,postProcess:this.options.postProcess})},_getFunction:function(a){var e;var d;var c;var f;if(a<this._minPoint.x){f=this._functions[0]}else{if(a>=this._maxPoint.x){f=this._functions[this._functions.length-1]}else{for(var b=0;b<this._functions.length;++b){f=this._functions[b];e=f.getBounds();d=e[0];c=e[1];if(a>=d.x&&a<c.x){break}}}}return f},evaluate:function(a){var b;var c=null;a=this.constrainX(a);if(this._preProcess){a=this._preProcess(a)}b=this._getFunction(a);if(b){c=b.evaluate(a);if(this._postProcess){c=this._postProcess(c)}}return c}});L.ColorClassFunction=L.PiecewiseFunction.extend({options:{interpolate:false},initialize:function(h,a,j){var e=[];var k;L.Util.setOptions(this,j);for(var f=0;f<h.length-1;++f){var b=h[f],d=h[f+1],g=a[f],c=this.options.interpolate?a[Math.min(a.length-1,f+1)]:a[f];k=new L.RGBColorBlendFunction(b,d,g,c);e.push(k)}L.PiecewiseFunction.prototype.initialize.call(this,e)}});L.CustomColorFunction=L.PiecewiseFunction.extend({options:{interpolate:true},initialize:function(e,c,a,m){L.Util.setOptions(this,m);var j=c-e;var k=this.options.interpolate?a.length-1:a.length;var b=j/k;var g=[];var l;var h;var d=new L.LinearFunction([0,e],[k,c]);for(var f=0;f<k;++f){h=f+1;l=this.options.interpolate?new L.RGBColorBlendFunction(d.evaluate(f),d.evaluate(h),a[f],a[h]):new L.RGBColorBlendFunction(d.evaluate(f),d.evaluate(h),a[f],a[f]);g.push(l)}d=null;L.PiecewiseFunction.prototype.initialize.call(this,g)}});L.CategoryFunction=L.Class.extend({initialize:function(b,a){L.Util.setOptions(this,a);this._categoryKeys=Object.keys(b);this._categoryMap=b;this._preProcess=this.options.preProcess;this._postProcess=this.options.postProcess},evaluate:function(a){var b;if(this._preProcess){a=this._preProcess(a)}b=this._categoryMap[a];if(this._postProcess){b=this._postProcess(b)}return b},getCategories:function(){return this._categoryKeys}});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){for(var b=(d||0),a=this.length;b<a;b++){if(this[b]===c){return b}}return -1}}if(!Object.keys){Object.keys=(function(){var c=Object.prototype.hasOwnProperty,d=!({toString:null}).propertyIsEnumerable("toString"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=b.length;return function(g){var e,h,f;if((typeof g!=="object"&&typeof g!=="function")||g===null){throw new TypeError("Object.keys called on non-object")}e=[];for(h in g){if(c.call(g,h)){e.push(h)}}if(d){for(f=0;f<a;f++){if(c.call(g,b[f])){e.push(b[f])}}}return e}})()}L.Util.guid=function(){var a=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};L.Util.getProperty=function(c,b,a){return(b in c)?c[b]:a};L.Util.setFieldValue=function(a,g,d){var f=g.split(".");var e=a;var b;for(var c=0;c<f.length-1;++c){b=f[c];e[b]=e[b]||{};e=e[b]}e[f[f.length-1]]=d};L.Util.getFieldValue=function(h,n){var l=null;if(n){var g=n.split(".");var o=h;var e;var i;var f;var a;var b;var d;var c=-1;var j;for(var m=0;m<g.length;++m){e=g[m];c=e.indexOf("[");if(c>-1){d=e.substring(c);e=e.substring(0,c);d=d.replace("[","").replace("]","");i=d.split("=");f=i[0];a=i[1];o=o[e];for(var k=0;k<o.length;++k){b=o[k];j=b[f];if(j&&j===a){o=b}}}else{if(o&&o.hasOwnProperty(e)){o=o[e]}else{o=null;break}}}l=o}else{l=h}return l};L.Util.getNumericRange=function(c,g){var e=Number.MAX_VALUE;var a=Number.MIN_VALUE;for(var d in c){if(c.hasOwnProperty(d)){var b=c[d];var f=L.Util.getFieldValue(b,g);e=Math.min(e,f);a=Math.max(a,f)}}return[e,a]};L.Util.pointToGeoJSON=function(){var b={type:"Feature",geometry:{type:"Point",coordinates:[this._latlng[1],this._latlng[0]]},properties:{}};for(var a in this.options){if(this.options.hasOwnProperty(a)){var c=this.options[a];if(typeof(c)!=="function"){b.properties[a]=c}}}return b};L.Util.updateLayer=function(a,b){if(a.eachLayer&&!a instanceof L.FeatureGroup){a.eachLayer(function(c){L.Util.updateLayer(c,b)})}else{b.call(this,a)}};L.CategoryLegend=L.Class.extend({initialize:function(a){L.Util.setOptions(this,a)},generate:function(i){i=i||{};var a=document.createElement("div");var f=L.DomUtil.create("div","legend",a);var d=i.className;var h=this.options;if(d){L.DomUtil.addClass(f,d)}if(i.title){L.DomUtil.create("div","legend-title",f).innerHTML=i.title}for(var g in h){categoryOptions=h[g];var e=categoryOptions.displayName||g;var b=L.DomUtil.create("div","data-layer-legend",f);var c=L.DomUtil.create("div","legend-box",b);L.DomUtil.create("div","key",b).innerHTML=e;L.StyleConverter.applySVGStyle(c,categoryOptions)}return a.innerHTML}});L.LegendIcon=L.DivIcon.extend({initialize:function(c,g,l){var f=document.createDocumentFragment();var a=document.createElement("div","",f);var d=L.DomUtil.create("div","legend",a);var e=L.DomUtil.create("div","title",d);var b=L.DomUtil.create("div","legend-box",d);var j=L.DomUtil.create("div","legend-values",d);var i;var h=g.title||g.name;if(h){e.innerHTML=h}for(var k in c){i=c[k];L.DomUtil.create("div","key",j).innerHTML=i.name||k;L.DomUtil.create("div","value",j).innerHTML=i.value}L.StyleConverter.applySVGStyle(b,g);b.style.height="5px";l.html=a.innerHTML;l.className=l.className||"legend-icon";L.DivIcon.prototype.initialize.call(this,l)}});L.legendIcon=function(a,c,b){return new L.LegendIcon(a,c,b)};L.GeometryUtils={getName:function(d){var b=null;if(d&&d.features){for(var a=0;a<d.features.length;++a){var c=d.features[a];if(c.properties&&c.properties.name){b=c.properties.name;break}}}return b},getGeoJSONLocation:function(g,b,e,f){var c=new L.GeoJSON(g,{pointToLayer:function(i,j){var h={location:j,text:e?L.Util.getFieldValue(b,e):[j.lat.toFixed(3),j.lng.toFixed(3)].join(", "),center:j};return f(h,b)}});var a=null;try{a=L.GeometryUtils.loadCentroid(g)}catch(d){console.log("Error loading centroid for "+JSON.stringify(g))}return{location:c,text:e?L.Util.getFieldValue(b,e):null,center:a}},mergeProperties:function(f,c,h){var d=c.features;var a=L.GeometryUtils.indexFeatureCollection(d,h);var j;var e;var g={type:"FeatureCollection",features:[]};for(var i in f){if(f.hasOwnProperty(i)){j=f[i];e=j[h];if(e){var k=a[e];for(var b in j){k.properties[b]=j[b]}g.features.push(k)}}}return g},indexFeatureCollection:function(b,e){var c=b.features;var i;var g;var a={};var h;for(var f=0;f<c.length;++f){i=c[f];g=i.properties;h=g[e];if(h in a){var d=a[h];if(d.geometry.type!=="GeometryCollection"){a[h]={type:"Feature",geometry:{type:"GeometryCollection",geometries:[i.geometry,d.geometry]}}}else{d.geometry.geometries.push(i.geometry)}}else{a[h]=i}}return a},arrayToMap:function(h,e,a){var d={};var c;var g;var f;for(var b=0;b<h.length;++b){c=h[b];g=c[e];f=a?c[a]:c;d[g]=f}return d},arrayToMaps:function(h,d){var b;var n;var k;var l;var j=[];var e;var a;var m;for(var f=0;f<d.length;++f){j.push({})}for(var g=0;g<h.length;++g){n=h[g];for(var c=0;c<d.length;++c){b=j[c];e=d[c];a=e.from;m=e.to;k=n[a];l=m?n[m]:n;b[k]=l}}return j},loadCentroid:function(k){var h=null;var c;var g,f;if(k.geometry&&k.geometry.type==="Point"){h=new L.LatLng(k.geometry.coordinates[1],k.geometry.coordinates[0])}else{if(typeof jsts!=="undefined"){var b=new jsts.io.GeoJSONParser();var e=b.read(k);if(e.getCentroid){c=e.getCentroid();g=c.coordinate.x;f=c.coordinate.y}else{if(e.features){var a=0;var j=0;for(var d=0;d<e.features.length;++d){c=e.features[d].geometry.getCentroid();a+=c.coordinate.x;j+=c.coordinate.y}g=a/e.features.length;f=j/e.features.length}else{c=e.geometry.getCentroid();g=c.coordinate.x;f=c.coordinate.y}}h=new L.LatLng(f,g)}}return h},loadCentroids:function(d){var c={};var b;for(var a in d){b=d[a];c[a]=L.GeometryUtils.loadCentroid(b)}return c}};L.SVGPathBuilder=L.Class.extend({initialize:function(c,a,b){this._points=c||[];this._innerPoints=a||[];L.Util.setOptions(this,b)},options:{closePath:true},_getPathString:function(e,f){var c="";if(e.length>0){var a=e[0];f=f!==null?f:2;var b="M";var g="L";var h="Z";if(L.Browser.vml){f=0;b="m";g="l";h="xe"}c=b+a.x.toFixed(f)+","+a.y.toFixed(f);for(var d=1;d<e.length;d++){a=e[d];c+=g+a.x.toFixed(f)+","+a.y.toFixed(f)}if(this.options.closePath){c+=h}}return c},addPoint:function(a,b){if(b){this._innerPoints.push(a)}else{this._points.push(a)}},build:function(b){b=b||this.options.digits;var a=this._getPathString(this._points,b);if(this._innerPoints){a+=this._getPathString(this._innerPoints,b)}return a}});L.StyleConverter={keyMap:{fillColor:{property:["background-color"],valueFunction:function(a){return a}},color:{property:["color","border-top-color","border-right-color","border-bottom-color","border-left-color"],valueFunction:function(a){return a}},weight:{property:["border-width"],valueFunction:function(a){return Math.ceil(a)+"px"}},stroke:{property:["border-style"],valueFunction:function(a){return a===true?"solid":"none"}},dashArray:{property:["border-style"],valueFunction:function(b){var a="solid";if(b){a="dashed"}return a}},barThickness:{property:["height"],valueFunction:function(a){return a+"px"}},radius:{property:["height"],valueFunction:function(a){return 2*a+"px"}},fillOpacity:{property:["opacity"],valueFunction:function(a){return a}}},applySVGStyle:function(c,a,b){var e=L.StyleConverter.keyMap;if(b){e=L.Util.extend(e,b)}c.style.borderStyle="solid";for(var d in a){L.StyleConverter.setCSSProperty(c,d,a[d],e)}return c},setCSSProperty:function(e,i,h,f){f=f||L.StyleConverter.keyMap;var g=f[i];var c="";if(g){var d=g.property;for(var a=0,b=d.length;a<b;++a){c+=d[a]+":"+g.valueFunction(h)+";"}}e.style.cssText+=c;return e}};L.StylesBuilder=L.Class.extend({initialize:function(a,b){this._categories=a;this._styleFunctionMap=b;this._buildStyles()},_buildStyles:function(){var f={};var d;var b;var a;for(var c=0;c<this._categories.length;++c){d=this._categories[c];f[d]={};for(var e in this._styleFunctionMap){b=this._styleFunctionMap[e];a=b.evaluate?b.evaluate(c):(typeof b==="function"?b(c):b);f[d][e]=a}}this._styleMap=f},getStyles:function(){return this._styleMap}});L.PaletteBuilder=L.Class.extend({initialize:function(a){this._styleFunctionMap=a},generate:function(k){k=k||{};var b=document.createElement("div");var g=L.DomUtil.create("div","palette",b);var f=k.count||10;var e=(function(n){var l=[];for(var m=0;m<n;++m){l.push(m)}return l})(f);var h=new L.StylesBuilder(e,this._styleFunctionMap);var j=h.getStyles();if(k.className){L.DomUtil.addClass(g,k.className)}for(var d in j){var c=L.DomUtil.create("i","palette-element",g);var a=j[d];L.StyleConverter.applySVGStyle(c,a)}return b.innerHTML}});L.HTMLUtils={buildTable:function(h,d,r){d=d||"table table-condensed table-striped table-bordered";var a=document.createDocumentFragment();var u=L.DomUtil.create("table",d,a);var t=L.DomUtil.create("thead","",u);var c=L.DomUtil.create("tbody","",u);var g=L.DomUtil.create("tr","",t);var p=["Name","Value"];for(var q=0,o=p.length;q<o;q++){var k=L.DomUtil.create("th","",g);k.innerHTML=p[q]}r=r||[];function s(w,y){for(var x=0,v=w.length;x<v;x++){if(w[x]===y){return true}}return false}for(var e in h){if(h.hasOwnProperty(e)&&!s(r,e)){var m=h[e];if(typeof m==="object"){var j=document.createElement("div");j.appendChild(L.HTMLUtils.buildTable(m,r));m=j.innerHTML}var b=L.DomUtil.create("tr","",c);var n=[e,m];for(q=0,o=n.length;q<o;q++){var f=L.DomUtil.create("td","",b);f.innerHTML=n[q]}}}return u}};L.AnimationUtils={animate:function(h,l,m,o){var g=o.delay||0;var k=o.frames||30;var e=o.duration||500;var i={};var d=o.easeFunction||function(p){return p};var a=o.complete;var c=e/k;for(var n in l){if(n!="color"&&n!="fillColor"&&m[n]){i[n]=new L.LinearFunction([0,l[n]],[k-1,m[n]])}else{if(n=="color"||n=="fillColor"){i[n]=new L.RGBColorBlendFunction(0,k-1,l[n],m[n])}}}var j={};var b=0;var f=function(){for(var p in i){j[p]=i[p].evaluate(b)}h.options=L.extend({},h.options,j);h.setStyle(h.options).redraw();b++;c=d(c);if(b<k){setTimeout(f,c)}else{a()}};setTimeout(f,g)}};L.Color=L.Class.extend({initialize:function(a){this._rgb=[0,0,0];this._hsl=[0,1,0.5];this._a=1;if(a){this.parseColorDef(a)}},parseColorDef:function(a){},rgbToHSL:function(a,i,k){a/=255;i/=255;k/=255;var m=Math.max(a,i,k),e=Math.min(a,i,k);var f,n,c=(m+e)/2;if(m==e){f=n=0}else{var j=m-e;n=c>0.5?j/(2-m-e):j/(m+e);switch(m){case a:f=(i-k)/j+(i<k?6:0);break;case i:f=(k-a)/j+2;break;case k:f=(a-i)/j+4;break}f/=6}return[f,n,c]},hslToRGB:function(i,m,f){var a,j,k;var e=function(h,g,b){if(b<0){b+=1}if(b>1){b-=1}if(b<1/6){return h+(g-h)*6*b}if(b<1/2){return g}if(b<2/3){return h+(g-h)*(2/3-b)*6}return h};if(m===0){a=j=k=f}else{var c=f<0.5?f*(1+m):f+m-f*m;var d=2*f-c;a=e(d,c,i+1/3);j=e(d,c,i);k=e(d,c,i-1/3)}return[Math.floor(a*255),Math.floor(j*255),Math.floor(k*255)]},setRGB:function(d,c,a){this._rgb=[d,c,a];this._hsl=this.rgbToHSL(d,c,a);return this},setHSL:function(c,b,a){this._hsl=[c,b,a];this._rgb=this.hslToRGB(c,b,a);return this},toHSL:function(){return this._hsl},toHSLString:function(){var a="hsl";if(this._a<1){a+="a"}return a+"("+(this._hsl[0]*360).toFixed(1)+","+(this._hsl[1]*100).toFixed(0)+"%,"+(this._hsl[2]*100).toFixed(0)+"%)"},toRGB:function(){return this._rgb},toRGBString:function(){var c;if(this._a<1){c="rgba("+this._rgb[0].toFixed(0)+","+this._rgb[1].toFixed(0)+","+this._rgb[2].toFixed(0)+","+this._a.toFixed(1)+")"}else{var b=[this._rgb[0].toString(16),this._rgb[1].toString(16),this._rgb[2].toString(16)];for(var a=0;a<b.length;++a){if(b[a].length===1){b[a]="0"+b[a]}}c="#"+b.join("")}return c},r:function(a){if(!arguments.length){return this._rgb[0]}return this.setRGB(a,this._rgb[1],this._rgb[2])},g:function(a){if(!arguments.length){return this._rgb[1]}return this.setRGB(this._rgb[0],a,this._rgb[2])},b:function(a){if(!arguments.length){return this._rgb[2]}return this.setRGB(this._rgb[0],this._rgb[1],a)},h:function(a){if(!arguments.length){return this._hsl[0]}return this.setHSL(a,this._hsl[1],this._hsl[2])},s:function(a){if(!arguments.length){return this._hsl[1]}return this.setHSL(this._hsl[0],a,this._hsl[2])},l:function(a){if(!arguments.length){return this._hsl[2]}return this.setHSL(this._hsl[0],this._hsl[1],a)},a:function(a){if(!arguments.length){return this._a}this._a=a;return this}});L.RGBColor=L.Color.extend({initialize:function(a){L.Color.prototype.initialize.call(this,a)},parseColorDef:function(h){var f=h instanceof Array;var e=h.indexOf("#")===0;var k=[];var j,i,c,d;if(f){j=Math.floor(h[0]);i=Math.floor(h[1]);c=Math.floor(h[2]);d=h.length===4?h[3]:1}else{if(e){h=h.replace("#","");j=parseInt(h.substring(0,2),16);i=parseInt(h.substring(2,4),16);c=parseInt(h.substring(4,6),16);d=h.length===8?parseInt(h.substring(6,8),16):1}else{k=h.replace("rgb","").replace("a","").replace(/\s+/g,"").replace("(","").replace(")","").split(",");j=parseInt(k[0]);i=parseInt(k[1]);c=parseInt(k[2]);d=k.length===4?parseInt(k[3]):1}}this.setRGB(j,i,c);this._a=d}});L.rgbColor=function(a){return new L.RGBColor(a)};L.HSLColor=L.Color.extend({initialize:function(a){L.Color.prototype.initialize.call(this,a)},parseColorDef:function(e){var d=e instanceof Array;var g,f,c,b;if(d){g=e[0];f=e[1];c=e[2];b=e.length===4?e[3]:1}else{var i=e.replace("hsl","").replace("a","").replace("(","").replace(/\s+/g,"").replace(/%/g,"").replace(")","").split(",");g=Number(i[0])/360;f=Number(i[1])/100;c=Number(i[2])/100;b=i.length===4?parseInt(i[3]):1}this.setHSL(g,f,c);this._a=b}});L.hslColor=function(a){return new L.HSLColor(a)};L.Animation=L.Class.extend({initialize:function(b,a){this._easeFunction=b;this._animateFrame=a},run:function(b,a){this.stop();this._el=b;this._inProgress=true;this._duration=a.duration||0.25;this._animationOptions=a;this._startTime=+new Date();this.fire("start");this._animate()},stop:function(){if(!this._inProgress){return}this._step();this._complete()},_animate:function(){this._animId=L.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var a=(+new Date())-this._startTime,b=this._duration*1000;if(a<b){this._runFrame(this._easeFunction(a/b))}else{this._runFrame(1);this._complete()}},_runFrame:function(a){this._animateFrame(a);this.fire("step")},_complete:function(){L.Util.cancelAnimFrame(this._animId);this._inProgress=false;this.fire("end")}});L.ColorBrewer={Sequential:{YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]}},Diverging:{PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]}},Qualitative:{Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}}};L.Palettes={huePalette:function(d,a,e,b,c){return new L.HSLHueFunction(new L.Point(d,e),new L.Point(a,b),c)},luminosityPalette:function(d,a,b,e,c){return new L.HSLLuminosityFunction(new L.Point(d,b),new L.Point(a,e),c)},saturationPalette:function(d,a,e,b,c){return new L.HSLSaturationFunction(new L.Point(d,e),new L.Point(a,b),c)},rgbBlendPalette:function(e,a,b,d,c){return new L.RGBColorBlendFunction(e,a,b,d,c)},hslBlendPalette:function(e,a,b,d,c){return new L.HSLColorBlendFunction(e,a,b,d,c)},customColorPalette:function(d,a,b,c){return new L.CustomColorFunction(d,a,b,c)}};L.DynamicColorPalettes={rainbow:{text:"Rainbow",getPalette:function(c,a,b){return L.Palettes.huePalette(c,a,0,300,b)}},greentored:{text:"Green - Red",getPalette:function(c,a,b){return L.Palettes.huePalette(c,a,120,0,b)}},yellowtored:{text:"Yellow - Red",getPalette:function(c,a,b){return L.Palettes.huePalette(c,a,60,0,b)}},orangetored:{text:"Orange - Red",getPalette:function(c,a,b){return L.Palettes.huePalette(c,a,30,0,b)}},redtopurple:{text:"Red - Purple",getPalette:function(c,a,b){return L.Palettes.huePalette(c,a,360,270,b)}},bluetored:{text:"Blue - Red",getPalette:function(c,a,b){return L.Palettes.huePalette(c,a,210,360,b)}},bluetored2:{text:"Blue - Red 2",getPalette:function(c,a,b){return L.Palettes.huePalette(c,a,180,0,b)}},whitetored:{text:"White - Red",getPalette:function(c,a,b){return L.Palettes.luminosityPalette(c,a,1,0.5,L.Util.extend(option,{outputHue:0}))}},whitetoorange:{text:"White - Orange",getPalette:function(c,a,b){return L.Palettes.luminosityPalette(c,a,1,0.5,L.Util.extend(option,{outputHue:30}))}},whitetoyellow:{text:"White - Yellow",getPalette:function(c,a,b){return L.Palettes.luminosityPalette(c,a,1,0.5,L.Util.extend(option,{outputHue:60}))}},whitetogreen:{text:"White - Green",getPalette:function(c,a,b){return L.Palettes.luminosityPalette(c,a,1,0.5,L.Util.extend(option,{outputHue:120}))}},whitetoltblue:{text:"White - Lt. Blue",getPalette:function(c,a,b){return L.Palettes.luminosityPalette(c,a,1,0.5,L.Util.extend(option,{outputHue:180}))}},whitetoblue:{text:"White - Blue",getPalette:function(c,a,b){return L.Palettes.luminosityPalette(c,a,1,0.5,L.Util.extend(option,{outputHue:240}))}},whitetopurple:{text:"White - Purple",getPalette:function(c,a,b){return L.Palettes.luminosityPalette(c,a,1,0.5,L.Util.extend(option,{outputHue:270}))}},graytored:{text:"Gray - Red",getPalette:function(c,a,b){return L.Palettes.saturationPalette(c,a,0,1,L.Util.extend(option,{outputHue:0}))}},graytoorange:{text:"Gray - Orange",getPalette:function(c,a,b){return L.Palettes.saturationPalette(c,a,0,1,L.Util.extend(option,{outputHue:30}))}},graytoyellow:{text:"Gray - Yellow",getPalette:function(c,a,b){return L.Palettes.saturationPalette(c,a,0,1,L.Util.extend(option,{outputHue:60}))}},graytogreen:{text:"Gray - Green",getPalette:function(c,a,b){return L.Palettes.saturationPalette(c,a,0,1,L.Util.extend(option,{outputHue:120}))}},graytoltblue:{text:"Gray - Lt. Blue",getPalette:function(c,a,b){return L.Palettes.saturationPalette(c,a,0,1,L.Util.extend(option,{outputHue:180}))}},graytoblue:{text:"Gray - Blue",getPalette:function(c,a,b){return L.Palettes.saturationPalette(c,a,0,1,L.Util.extend(option,{outputHue:240}))}},graytopurple:{text:"Gray - Purple",getPalette:function(c,a,b){return L.Palettes.saturationPalette(c,a,0,1,L.Util.extend(option,{outputHue:270}))}}};L.DynamicPaletteElement=L.Class.extend({initialize:function(b,a){this._key=b;this._dynamicPalette=a},generate:function(m){var j=L.DomUtil.create("div","palette");var g=m.count;var d=this._dynamicPalette.getPalette(0,g-1);var b=m.width;var h=true;if(m.showText){h=m.showText}j.setAttribute("data-palette-key",this._key);if(this._dynamicPalette.text&&h){L.DomUtil.create("div","palette-text",j).innerHTML='<i class="icon-ok hidden"></i>'+this._dynamicPalette.text}var k=b/g;if(m.className){L.DomUtil.addClass(j,m.className)}for(var e=0;e<g;++e){var c=L.DomUtil.create("i","palette-element");for(var f in d){var l=d[f];var a=l.evaluate?l.evaluate(e):l;L.StyleConverter.setCSSProperty(c,f,a)}c.style.width=k+"px";j.appendChild(c)}return j}});L.RegularPolygon=L.Polygon.extend({statics:{R:6378.137,M_PER_KM:1000},initialize:function(b,a){this._centerLatLng=b;L.Util.setOptions(this,a);L.Polygon.prototype.initialize.call(this,this._getLatLngs(),a)},options:{fill:true,radius:1000,numberOfSides:4,rotation:0,maxDegrees:360},getLatLng:function(){return this._centerLatLng},setRadius:function(a){this.options.radius=a;this._latlngs=this._getLatLngs();this.redraw()},_getLatLngs:function(){var d=this.options.maxDegrees||360;var b=d/Math.max(this.options.numberOfSides,3);var f=d+this.options.rotation;var e=this.options.rotation;var a=[];var c;while(e<f){c=this._getPoint(e);a.push(c);e+=b}return a},_getPoint:function(b){var g=function(j){return j*L.LatLng.DEG_TO_RAD};var a=function(j){return j*L.LatLng.RAD_TO_DEG};var i=g(b);var h=this.options.radius/L.RegularPolygon.M_PER_KM/L.RegularPolygon.R;var d=g(this._centerLatLng.lat);var f=g(this._centerLatLng.lng);var c=Math.asin(Math.sin(d)*Math.cos(h)+Math.cos(d)*Math.sin(h)*Math.cos(i));var e=f+Math.atan2(Math.sin(i)*Math.sin(h)*Math.cos(d),Math.cos(h)-Math.sin(d)*Math.sin(c));c=a(c);e=a(e);return new L.LatLng(c,e)},toGeoJSON:function(){var b={type:"Feature",geometry:{type:"Polygon",coordinates:[[],[]]},properties:this.options};for(var a=0;a<this._latlngs.length;++a){var c=this._latlngs[a];b.geometry.coordinates[0].push([c.lng,c.lat])}return b}});L.regularPolygon=function(b,a){return new L.RegularPolygon(b,a)};L.Path.XLINK_NS="http://www.w3.org/1999/xlink";var TextFunctions=TextFunctions||{__updatePath:L.Path.prototype._updatePath,_updatePath:function(){this.__updatePath.call(this);if(this.options.text){this._createText(this.options.text)}},_initText:function(){if(this.options.text){this._createText(this.options.text)}},getTextAnchor:function(){if(this._point){return this._point}},setTextAnchor:function(a){if(this._text){this._text.setAttribute("x",a.x);this._text.setAttribute("y",a.y)}},_createText:function(i){if(this._text){this._container.removeChild(this._text)}if(this._pathDef){this._defs.removeChild(this._pathDef)}var d=function(l,m){var j="";for(var k in m){j+=k+": "+m[k]+";"}l.setAttribute("style",j);return l};var b=function(l,j){for(var k in j){l.setAttribute(k,j[k])}return l};this._text=this._createElement("text");var c=document.createTextNode(i.text);if(i.path){var f=i.path;var h=L.Util.guid();var e=this._createElement("path");e.setAttribute("d",this._path.getAttribute("d"));e.setAttribute("id",h);if(!this._defs){this._defs=this._createElement("defs");this._container.appendChild(this._defs)}this._defs.appendChild(e);this._pathDef=e;var a=this._createElement("textPath");if(f.startOffset){a.setAttribute("startOffset",f.startOffset)}if(f.attr){b(a,f.attr)}if(f.style){d(a,f.style)}a.setAttributeNS(L.Path.XLINK_NS,"xlink:href","#"+h);a.appendChild(c);this._text.appendChild(a)}else{this._text.appendChild(c);var g=this.getTextAnchor();this.setTextAnchor(g)}if(i.className){this._text.setAttribute("class",i.className)}else{this._text.setAttribute("class","leaflet-svg-text")}if(i.attr){b(this._text,i.attr)}if(i.style){d(this._text,i.style)}this._container.appendChild(this._text)}};var PathFunctions=PathFunctions||{__updateStyle:L.Path.prototype._updateStyle,_createDefs:function(){this._defs=this._createElement("defs");this._container.appendChild(this._defs)},_createGradient:function(n){if(!this._defs){this._createDefs()}if(this._gradient){this._defs.removeChild(this._gradient)}n=n!==true?L.extend({},n):{};var a=L.Util.guid();this._gradientGuid=a;var j;var h;if(n.gradientType=="radial"){j=this._createElement("radialGradient");h=n.radial||{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"}}else{j=this._createElement("linearGradient");var b=n.vector||[["0%","0%"],["100%","100%"]];h={x1:b[0][0],x2:b[1][0],y1:b[0][1],y2:b[1][1]}}h.id="grad"+a;var l=n.stops||[{offset:"0%",style:{color:"rgb(255, 255, 255)",opacity:1}},{offset:"60%",style:{color:this.options.fillColor||this.options.color,opacity:1}}];var k;for(k in h){j.setAttribute(k,h[k])}for(var d=0;d<l.length;++d){var g=l[d];var c=this._createElement("stop");g.style=g.style||{};for(k in g){var m=g[k];if(k==="style"){var e="";m.color=m.color||(this.options.fillColor||this.options.color);m.opacity=typeof m.opacity==="undefined"?1:m.opacity;for(var f in m){e+="stop-"+f+":"+m[f]+";"}m=e}c.setAttribute(k,m)}j.appendChild(c)}this._gradient=j;this._defs.appendChild(j)},_createDropShadow:function(i){if(!this._defs){this._createDefs()}if(this._dropShadow){this._defs.removeChild(this._dropShadow)}var a=L.Util.guid();var b=this._createElement("filter");var j=this._createElement("feOffset");var f=this._createElement("feGaussianBlur");var g=this._createElement("feBlend");i=i||{width:"200%",height:"200%"};i.id="filter"+a;var h;for(h in i){b.setAttribute(h,i[h])}var d={result:"offOut","in":"SourceAlpha",dx:"2",dy:"2"};var e={result:"blurOut","in":"offOut",stdDeviation:"2"};var c={"in":"SourceGraphic",in2:"blurOut",mode:"lighten"};for(h in d){j.setAttribute(h,d[h])}for(h in e){f.setAttribute(h,e[h])}for(h in c){g.setAttribute(h,c[h])}b.appendChild(j);b.appendChild(f);b.appendChild(g);this._dropShadow=b;this._defs.appendChild(b)},_createCustomElement:function(a,b){var d=this._createElement(a);for(var c in b){if(b.hasOwnProperty(c)){d.setAttribute(c,b[c])}}return d},_createImage:function(a){var b=this._createElement("image");b.setAttribute("width",a.width);b.setAttribute("height",a.height);b.setAttribute("x",a.x||0);b.setAttribute("y",a.y||0);b.setAttributeNS(L.Path.XLINK_NS,"xlink:href",a.url);return b},_createPattern:function(b){if(this._pattern){this._defs.removeChild(this._pattern)}var a=this._createCustomElement("pattern",b);this._pattern=a;return a},_createShape:function(c,b){if(this._shape){this._container.removeChild(this._shape)}var a=this._createCustomElement(c,b);return a},_applyCustomStyles:function(){},_createFillPattern:function(b){var e=L.Util.guid();var d=b.pattern;d.id=e;d.patternUnits=d.patternUnits||"objectBoundingBox";var a=this._createPattern(d);var c=this._createImage(b.image);c.setAttributeNS(L.Path.XLINK_NS,"xlink:href",b.url);a.appendChild(c);if(!this._defs){this._createDefs()}this._defs.appendChild(a);this._path.setAttribute("fill","url(#"+e+")")},_getDefaultDiameter:function(a){return 1.75*a},_createShapeImage:function(d){d=d||{};var c=L.Util.guid();var h=this.options.radius||Math.max(this.options.radiusX,this.options.radiusY);var q=this._getDefaultDiameter(h);var j=d.imageSize||new L.Point(q,q);var a=d.radius||q/2;var e=d.shape||{circle:{r:a,cx:0,cy:0}};var n=d.pattern||{width:j.x,height:j.y,x:0,y:0};var l=Object.keys(e);var g=l.length>0?l[0]:"circle";e[g].fill="url(#"+c+")";var i=this._createShape(g,e[g]);if(this.options.clickable){i.setAttribute("class","leaflet-clickable")}n.id=c;n.patternUnits=n.patternUnits||"objectBoundingBox";var k=this._createPattern(n);d=d.image||{width:j.x,height:j.y,x:0,y:0,url:this.options.imageCircleUrl};var f=this._createImage(d);f.setAttributeNS(L.Path.XLINK_NS,"xlink:href",d.url);k.appendChild(f);this._defs.appendChild(k);this._container.insertBefore(i,this._defs);this._shape=i;var m=this;this._shape.addEventListener("mouseover",function(){m.fire("mouseover")});this._shape.addEventListener("mouseout",function(){m.fire("mouseout")});this._shape.addEventListener("mousemove",function(){m.fire("mousemove")});var o=this.getTextAnchor();if(this._shape&&o){if(this._shape.tagName==="circle"||this._shape.tagName==="ellipse"){this._shape.setAttribute("cx",o.x);this._shape.setAttribute("cy",o.y)}else{var b=this._shape.getAttribute("width");var p=this._shape.getAttribute("height");this._shape.setAttribute("x",o.x-Number(b)/2);this._shape.setAttribute("y",o.y-Number(p)/2)}}},_updateStyle:function(b){this.__updateStyle.call(this,b);var a=b?b:this;if(a.options.stroke){if(a.options.lineCap){a._path.setAttribute("stroke-linecap",a.options.lineCap)}if(a.options.lineJoin){a._path.setAttribute("stroke-linejoin",a.options.lineJoin)}}if(a.options.gradient){a._createGradient(a.options.gradient);a._path.setAttribute("fill","url(#"+a._gradient.getAttribute("id")+")")}else{if(!a.options.fill){a._path.setAttribute("fill","none")}}if(a.options.dropShadow){a._createDropShadow();a._path.setAttribute("filter","url(#"+a._dropShadow.getAttribute("id")+")")}else{a._path.removeAttribute("filter")}if(a.options.fillPattern){a._createFillPattern(a.options.fillPattern)}a._applyCustomStyles()}};if(L.SVG){var SVGStyleFunctions=L.Util.extend(PathFunctions,{__updateStyle:L.SVG.prototype._updateStyle});var SVGTextFunctions=L.Util.extend(TextFunctions,{__updatePath:L.SVG.prototype._updatePath});L.SVG.include(SVGStyleFunctions);L.SVG.include(SVGTextFunctions)}var LineTextFunctions=L.extend({},TextFunctions);LineTextFunctions.__updatePath=L.Polyline.prototype._updatePath;LineTextFunctions.getCenter=function(){var c=this._latlngs,b=c.length,e,d,k,h,g,a;for(e=0,d=b-1,area=0,lat=0,lng=0;e<b;d=e++){k=c[e];h=c[d];g=k.lat*h.lng-h.lat*k.lng;lat+=(k.lat+h.lat)*g;lng+=(k.lng+h.lng)*g;area+=g/2}a=area?new L.LatLng(lat/(6*area),lng/(6*area)):c[0];a.area=area;return a};LineTextFunctions.getTextAnchor=function(){var a=this.getCenter();return this._map.latLngToLayerPoint(a)};L.Polyline.include(LineTextFunctions);L.CircleMarker.include(TextFunctions);L.Path.include(PathFunctions);L.Polygon.include(PathFunctions);L.Polyline.include(PathFunctions);L.CircleMarker.include(PathFunctions);L.CircleMarker=L.CircleMarker.extend({_applyCustomStyles:function(){if(this.options.shapeImage||this.options.imageCircleUrl){this._createShapeImage(this.options.shapeImage)}},getTextAnchor:function(){var a=null;if(this._point){a=new L.Point(this._point.x,this._point.y)}return a}});L.Point.prototype.rotate=function(d,b){var a=this.distanceTo(b);var c=(d*L.LatLng.DEG_TO_RAD)+Math.atan2(this.y-b.y,this.x-b.x);this.x=b.x+(a*Math.cos(c));this.y=b.y+(a*Math.sin(c))};L.MapMarker=L.Path.extend({includes:TextFunctions,initialize:function(b,a){L.Path.prototype.initialize.call(this,a);this._latlng=b},options:{fill:true,fillOpacity:1,opacity:1,radius:15,innerRadius:5,position:{x:0,y:0},rotation:0,numberOfSides:50,color:"#000000",fillColor:"#0000FF",weight:1,gradient:true,dropShadow:true,clickable:true},setLatLng:function(a){this._latlng=a;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints();if(this.options.innerRadius>0){this._innerPoints=this._getPoints(true).reverse()}},getBounds:function(){var g=this._map,c=this.options.radius*3,b=g.project(this._latlng),d=new L.Point(b.x-this.options.radius,b.y),f=new L.Point(b.x+this.options.radius,b.y-c),a=g.unproject(d),e=g.unproject(f);return new L.LatLngBounds(a,e)},getLatLng:function(){return this._latlng},setRadius:function(a){this.options.radius=a;return this.redraw()},setInnerRadius:function(a){this.options.innerRadius=a;return this.redraw()},setRotation:function(a){this.options.rotation=a;return this.redraw()},setNumberOfSides:function(a){this.options.numberOfSides=a;return this.redraw()},getPathString:function(){var c=this.getTextAnchor();if(this._shape){if(this._shape.tagName==="circle"||this._shape.tagName==="ellipse"){this._shape.setAttribute("cx",c.x);this._shape.setAttribute("cy",c.y)}else{var b=this._shape.getAttribute("width");var a=this._shape.getAttribute("height");this._shape.setAttribute("x",c.x-Number(b)/2);this._shape.setAttribute("y",c.y-Number(a)/2)}}this._path.setAttribute("shape-rendering","geometricPrecision");return new L.SVGPathBuilder(this._points,this._innerPoints).build(6)},getTextAnchor:function(){var a=null;if(this._point){a=new L.Point(this._point.x,this._point.y-2*this.options.radius)}return a},_getPoints:function(l){var c=!l?210:360;var h=!l?c/50:c/Math.max(this.options.numberOfSides,3);var d=!l?c:c+this.options.rotation;var e=!l?-30:this.options.rotation;var i=[];var b;var j;var f=this.options.radius;var k=Math.sqrt(0.75);var g=function(m){return m*L.LatLng.DEG_TO_RAD};var a=this._point;if(!l){i.push(a);i.push(new L.Point(a.x+k*f,a.y-1.5*f))}while(e<d){j=g(e);b=this._getPoint(j,f,l);i.push(b);e+=h}if(!l){i.push(new L.Point(a.x-k*f,a.y-1.5*f))}return i},_getPoint:function(d,a,b){var c=a;a=!b?a:this.options.innerRadius;return new L.Point(this._point.x+this.options.position.x+a*Math.cos(d),this._point.y-2*c+this.options.position.y-a*Math.sin(d))},_applyCustomStyles:function(){if(this.options.shapeImage||this.options.imageCircleUrl){this._createShapeImage(this.options.shapeImage)}},toGeoJSON:function(){return L.Util.pointToGeoJSON.call(this)}});L.mapMarker=function(b,a){return new L.MapMarker(b,a)};L.RegularPolygonMarker=L.Path.extend({includes:TextFunctions,initialize:function(b,a){L.Path.prototype.initialize.call(this,a);this._latlng=b;this.options.numberOfSides=Math.max(this.options.numberOfSides,3)},options:{fill:true,radiusX:10,radiusY:10,rotation:0,numberOfSides:3,position:{x:0,y:0},maxDegrees:360,gradient:true,dropShadow:false,clickable:true},setLatLng:function(a){this._latlng=a;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints();if(this.options.innerRadius||(this.options.innerRadiusX&&this.options.innerRadiusY)){this._innerPoints=this._getPoints(true).reverse()}},getBounds:function(){var a=this._map,c=this.options.radius||this.options.radiusX,b=this.options.radius||this.options.radiusY,g=c*Math.cos(Math.PI/4),f=b*Math.sin(Math.PI/4),j=a.project(this._latlng),h=new L.Point(j.x-g,j.y+f),d=new L.Point(j.x+g,j.y-f),i=a.unproject(h),e=a.unproject(d);return new L.LatLngBounds(i,e)},setRadius:function(a){this.options.radius=a;return this.redraw()},setRadiusXY:function(b,a){this.options.radius=null;this.options.radiusX=b;this.options.radiusY=a;return this.redraw()},setInnerRadius:function(a){this.options.innerRadius=a;return this.redraw()},setInnerRadiusXY:function(b,a){this.options.innerRadius=null;this.options.innerRadiusX=b;this.options.innerRadiusY=a;return this.redraw()},setRotation:function(a){this.options.rotation=a;return this.redraw()},setNumberOfSides:function(a){this.options.numberOfSides=a;return this.redraw()},getLatLng:function(){return this._latlng},getPathString:function(){var c=this.getTextAnchor();if(this._shape){if(this._shape.tagName==="circle"||this._shape.tagName==="ellipse"){this._shape.setAttribute("cx",c.x);this._shape.setAttribute("cy",c.y)}else{var b=this._shape.getAttribute("width");var a=this._shape.getAttribute("height");this._shape.setAttribute("x",c.x-Number(b)/2);this._shape.setAttribute("y",c.y-Number(a)/2)}}this._path.setAttribute("shape-rendering","geometricPrecision");return new L.SVGPathBuilder(this._points,this._innerPoints).build(6)},_getPoints:function(k){var d=this.options.maxDegrees||360;var h=d/Math.max(this.options.numberOfSides,3);var e=d;var f=0;var i=[];var c;var j;var b=!k?this.options.radius||this.options.radiusX:this.options.innerRadius||this.options.innerRadiusX;var a=!k?this.options.radius||this.options.radiusY:this.options.innerRadius||this.options.innerRadiusY;var g=function(l){return l*L.LatLng.DEG_TO_RAD};while(f<e){j=g(f);c=this._getPoint(j,b,a);i.push(c);f+=h}return i},_getPoint:function(e,d,c){var b=this.options.position?this._point.add(new L.Point(this.options.position.x,this.options.position.y)):this._point;var a=new L.Point(b.x+d*Math.cos(e),b.y+c*Math.sin(e));a.rotate(this.options.rotation,b);return a},_getDefaultDiameter:function(a){var c=Math.PI/this.options.numberOfSides;var b=a*Math.cos(c);return 1.75*b},_applyCustomStyles:function(){if(this.options.shapeImage||this.options.imageCircleUrl){this._createShapeImage(this.options.shapeImage)}},toGeoJSON:function(){return L.Util.pointToGeoJSON.call(this)}});L.regularPolygonMarker=function(b,a){return new L.RegularPolygonMarker(b,a)};L.StarMarker=L.RegularPolygonMarker.extend({options:{numberOfPoints:5,rotation:-15,maxDegrees:360,gradient:true,dropShadow:true},setNumberOfPoints:function(a){this.options.numberOfPoints=a;return this.redraw()},_getPoints:function(l){var d=this.options.maxDegrees||360;var h=d/this.options.numberOfPoints;var e=d;var f=0;var i=[];var c,k;var j;var b=!l?this.options.radius||this.options.radiusX:this.options.innerRadius||this.options.innerRadiusX;var a=!l?this.options.radius||this.options.radiusY:this.options.innerRadius||this.options.innerRadiusY;var g=function(m){return m*L.LatLng.DEG_TO_RAD};while(f<e){j=g(f);c=this._getPoint(j,b,a);k=this._getPoint(j+g(h)/2,b/2,a/2);i.push(c);i.push(k);f+=h}return i}});L.starMarker=function(b,a){return new L.StarMarker(b,a)};L.TriangleMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:3,rotation:30,radius:5}});L.triangleMarker=function(b,a){return new L.TriangleMarker(b,a)};L.DiamondMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:4,radiusX:5,radiusY:10}});L.diamondMarker=function(b,a){return new L.DiamondMarker(b,a)};L.SquareMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:4,rotation:45,radius:5}});L.squareMarker=function(b,a){return new L.SquareMarker(b,a)};L.PentagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:5,rotation:-18,radius:5}});L.pentagonMarker=function(b,a){return new L.PentagonMarker(b,a)};L.HexagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:6,rotation:30,radius:5}});L.hexagonMarker=function(b,a){return new L.HexagonMarker(b,a)};L.OctagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:8,rotation:22.5,radius:5}});L.octagonMarker=function(b,a){return new L.OctagonMarker(b,a)};L.SVGMarker=L.Path.extend({initialize:function(b,a){L.Path.prototype.initialize.call(this,a);this._svg=a.svg;if(this._svg.indexOf("<")===0){this._data=this._svg}this._latlng=b},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},setLatLng:function(a){this._latlng=a;this.redraw()},getLatLng:function(){return this._latlng},getPathString:function(){var b=this;var a=function(){var k=b._path.parentNode;while(k.nodeName.toLowerCase()!=="g"){k=k.parentNode}if(b.options.clickable){k.setAttribute("class","leaflet-clickable")}var i=b._data;var j=i.nodeName.toLowerCase()==="svg"?i.cloneNode(true):i.querySelector("svg").cloneNode(true);if(b.options.setStyle){b.options.setStyle.call(b,j)}var p=j.getAttribute("width");var l=j.getAttribute("height");var d=p?p.replace("px",""):"100%";var q=l?l.replace("px",""):"100%";if(d==="100%"){d=b.options.size.x;q=b.options.size.y;j.setAttribute("width",d+(String(d).indexOf("%")!==-1?"":"px"));j.setAttribute("height",q+(String(q).indexOf("%")!==-1?"":"px"))}var r=b.options.size||new L.Point(d,q);var f=new L.Point(r.x/d,r.y/q);var e=k.getElementsByTagName("svg");if(e.length>0){e[0].parentNode.removeChild(e[0])}k.appendChild(j);var m=[];var h=b.options.anchor||new L.Point(-r.x/2,-r.y/2);var o=b._point.x+h.x;var n=b._point.y+h.y;m.push("translate("+o+" "+n+")");m.push("scale("+f.x+" "+f.y+")");if(b.options.rotation){m.push("rotate("+b.options.rotation+" "+(d/2)+" "+(q/2)+")")}k.setAttribute("transform",m.join(" "))};if(!this._data){var c=new XMLHttpRequest();c.onreadystatechange=function(){if(this.readyState==4&&this.status==200){b._data=this.responseXML;a()}};c.open("GET",this._svg,true);c.send(null)}else{a()}},toGeoJSON:function(){return pointToGeoJSON.call(this)}});L.MarkerGroup=L.FeatureGroup.extend({initialize:function(b,a){L.FeatureGroup.prototype.initialize.call(this,a);this.setLatLng(b)},setStyle:function(a){return this},setLatLng:function(a){this._latlng=a;this.eachLayer(function(b){if(b.setLatLng){b.setLatLng(a)}});return this},getLatLng:function(a){return this._latlng},toGeoJSON:function(){var b={type:"FeatureCollection",features:[]};var a=function(c){return function(d){c.features.push(L.Util.pointToGeoJSON.call(d))}};this.eachLayer(a(b));return b}});L.BarMarker=L.Path.extend({initialize:function(b,a){L.Path.prototype.initialize.call(this,a);this._latlng=b},options:{fill:true,width:2,maxHeight:10,position:{x:0,y:0},weight:1,color:"#000",opacity:1,gradient:true,dropShadow:false,lineCap:"square",lineJoin:"miter"},setLatLng:function(a){this._latlng=a;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints()},getBounds:function(){var f=this._map,b=f.project(this._latlng),g=this.options.width/2,c=new L.Point(b.x-g,b.y),e=new L.Point(b.x+g,b.y-this.options.maxHeight),a=f.unproject(c),d=f.unproject(e);return new L.LatLngBounds(a,d)},getLatLng:function(){return this._latlng},getPathString:function(){this._path.setAttribute("shape-rendering","crispEdges");return new L.SVGPathBuilder(this._points).build()},_getPoints:function(){var f=[];var d=this._point.x+this.options.position.x;var c=this._point.y+this.options.position.y;var b=this.options.width/2;var g,a,i,e;var h=this.options.value/this.options.maxValue*this.options.maxHeight;g=new L.Point(d+b,c);a=new L.Point(d+b,c-h);i=new L.Point(d-b,c-h);e=new L.Point(d-b,c);f=[g,a,i,e];return f}});L.barMarker=function(b,a){return new L.BarMarker(b,a)};L.ChartMarker=L.FeatureGroup.extend({initialize:function(b,a){L.Util.setOptions(this,a);this._layers={};this._latlng=b;this._loadComponents()},setLatLng:function(a){this._latlng=a;return this.redraw()},getLatLng:function(){return this._latlng},_loadComponents:function(){},_highlight:function(a){if(a.weight){a.weight*=2}return a},_unhighlight:function(a){if(a.weight){a.weight/=2}return a},_bindMouseEvents:function(c){var a=this;var b=this.options.tooltipOptions;c.on("mouseover",function(j){var f=this.options;var p=f.key;var o=f.value;var q=j.layerPoint;var n=q.x-this._point.x;var m=q.y-this._point.y;var k=f.iconSize;var d=n;var s=m;var g;var h=5;d=n<0?k.x-n+h:-n-h;s=m<0?k.y-m+h:-m-h;g=new L.Point(d,s);var r={};var i=f.displayText?f.displayText(o):o;r[p]={name:f.displayName,value:i};var l=new L.LegendIcon(r,f,{className:"leaflet-div-icon",iconSize:b?b.iconSize:k,iconAnchor:g});f.marker=new L.Marker(a._latlng,{icon:l});f=a._highlight(f);this.initialize(a._latlng,f);this.redraw();this.setStyle(f);a.addLayer(f.marker)});c.on("mouseout",function(f){var d=this.options;d=a._unhighlight(d);this.initialize(a._latlng,d);this.redraw();this.setStyle(d);a.removeLayer(d.marker)})},bindPopup:function(b,a){this.eachLayer(function(c){c.bindPopup(b,a)})},openPopup:function(c){for(var b in this._layers){var a=this._layers[b];c=c||this._latlng;a.openPopup(c);break}},closePopup:function(){for(var b in this._layers){var a=this._layers[b];latlng=latlng||this._latlng;a.closePopup();break}},redraw:function(){this.clearLayers();this._loadComponents()},toGeoJSON:function(){return L.Util.pointToGeoJSON.call(this)}});L.BarChartMarker=L.ChartMarker.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.ChartMarker.prototype.initialize.call(this,b,a)},options:{weight:1,opacity:1,color:"#000",fill:true,position:{x:0,y:0},width:10,offset:0,iconSize:new L.Point(50,40)},_loadComponents:function(){var k,i,f;var g;var o=this.options;var j;var h;var n=Object.keys(this.options.data);var e=n.length;var a=this.options.width;var c=this.options.offset||0;var d=this.options.data;var b=this.options.chartOptions;var m;j=-((a*e)+(c*(e-1)))/2+a/2;h=0;for(var l in d){k=d[l];m=b[l];i=m.minValue||0;f=m.maxValue||100;o.fillColor=m.fillColor||this.options.fillColor;o.value=k;o.minValue=i;o.maxValue=f;o.position={x:j,y:h};o.width=a;o.maxHeight=m.maxHeight||10;o.key=l;o.value=k;o.displayName=m.displayName;o.opacity=this.options.opacity||1;o.fillOpacity=this.options.fillOpacity||0.7;o.weight=this.options.weight||1;o.color=m.color||this.options.color;o.displayText=m.displayText;g=new L.BarMarker(this._latlng,o);this._bindMouseEvents(g);this.addLayer(g);j+=a+c}}});L.RadialBarMarker=L.Path.extend({initialize:function(b,a){L.Path.prototype.initialize.call(this,a);this._latlng=b},options:{fill:true,radius:10,rotation:0,numberOfSides:30,position:{x:0,y:0},gradient:true,dropShadow:false},setLatLng:function(a){this._latlng=a;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints()},getBounds:function(){var a=this._map,c=this.options.radiusX||this.options.radius,b=this.options.radiusY||this.options.radius,g=c*Math.cos(Math.PI/4),f=b*Math.sin(Math.PI/4),j=a.project(this._latlng),h=new L.Point(j.x-g,j.y+f),d=new L.Point(j.x+g,j.y-f),i=a.unproject(h),e=a.unproject(d);return new L.LatLngBounds(i,e)},getLatLng:function(){return this._latlng},getPathString:function(){var e=this.options.endAngle-this.options.startAngle;var c=e>=180?"1":"0";var d=this.options.radiusX||this.options.radius;var b=this.options.radiusY||this.options.radius;var a="M"+this._points[0].x.toFixed(2)+","+this._points[0].y.toFixed(2)+"A"+d.toFixed(2)+","+b.toFixed(2)+" 0 "+c+",1 "+this._points[1].x.toFixed(2)+","+this._points[1].y.toFixed(2)+"L";if(this._innerPoints){a=a+this._innerPoints[0].x.toFixed(2)+","+this._innerPoints[0].y.toFixed(2);a=a+"A"+(d-this.options.barThickness).toFixed(2)+","+(b-this.options.barThickness).toFixed(2)+" 0 "+c+",0 "+this._innerPoints[1].x.toFixed(2)+","+this._innerPoints[1].y.toFixed(2)+"z"}else{a=a+this._point.x.toFixed(2)+","+this._point.y.toFixed(2)+"z"}if(L.Browser.vml){a=Core.SVG.path(a)}this._path.setAttribute("shape-rendering","geometricPrecision");return a},_getPoints:function(){var d=this.options.endAngle-this.options.startAngle;var e=this.options.endAngle+this.options.rotation;var f=this.options.startAngle+this.options.rotation;var i=[];var c="radiusX" in this.options?this.options.radiusX:this.options.radius;var b="radiusY" in this.options?this.options.radiusY:this.options.radius;var g=function(j){return j*L.LatLng.DEG_TO_RAD};e=e||0;if(d===360){e=e-0.1}var h=g(f);var a=g(e);i.push(this._getPoint(h,c,b));i.push(this._getPoint(a,c,b));if(this.options.barThickness){this._innerPoints=[];this._innerPoints.push(this._getPoint(a,c-this.options.barThickness,b-this.options.barThickness));this._innerPoints.push(this._getPoint(h,c-this.options.barThickness,b-this.options.barThickness))}return i},_getPoint:function(c,b,a){return new L.Point(this._point.x+this.options.position.x+b*Math.cos(c),this._point.y+this.options.position.y+a*Math.sin(c))}});L.radialBarMarker=function(b,a){return new L.RadialBarMarker(b,a)};L.PieChartMarker=L.ChartMarker.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.ChartMarker.prototype.initialize.call(this,b,a)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:0,numberOfSides:50,mouseOverExaggeration:1.2,maxDegrees:360,iconSize:new L.Point(50,40)},_highlight:function(b){var d=b.radiusX;var c=b.radiusY;var a=b.barThickness;b.oldBarThickness=a;b.oldRadiusX=d;b.oldRadiusY=c;b.radiusX*=b.mouseOverExaggeration;b.radiusY*=b.mouseOverExaggeration;b.barThickness=b.radiusX-d+a;return b},_unhighlight:function(a){a.radiusX=a.oldRadiusX;a.radiusY=a.oldRadiusY;a.barThickness=a.oldBarThickness;return a},_loadComponents:function(){var i;var g=0;var c=0;var l=0;var a=this.options.maxDegrees||360;var b=this.options.rotation;var h;var m=this.options;var f=this.options.data;var e=this.options.chartOptions;var k;var j;var d=function(p,n){var o=0;if(p[n]){o=parseFloat(p[n])}return o};for(j in f){i=d(f,j);g+=i}if(g>0){for(j in f){i=parseFloat(f[j])||0;k=e[j];l=i/g;c=l*a;m.startAngle=b;m.endAngle=b+c;m.fillColor=k.fillColor;m.color=k.color||"#000";m.radiusX=this.options.radiusX||this.options.radius;m.radiusY=this.options.radiusY||this.options.radius;m.rotation=0;m.key=j;m.value=i;m.displayName=k.displayName;m.displayText=k.displayText;h=new L.RadialBarMarker(this._latlng,m);this._bindMouseEvents(h);b=m.endAngle;this.addLayer(h)}}}});L.pieChartMarker=function(b,a){return new L.PieChartMarker(b,a)};L.CoxcombChartMarker=L.PieChartMarker.extend({statics:{SIZE_MODE_RADIUS:"radius",SIZE_MODE_AREA:"area"}});L.CoxcombChartMarker=L.CoxcombChartMarker.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.PieChartMarker.prototype.initialize.call(this,b,a)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:0,numberOfSides:50,mouseOverExaggeration:1.2,maxDegrees:360,iconSize:new L.Point(50,40),sizeMode:L.CoxcombChartMarker.SIZE_MODE_AREA},_loadComponents:function(){var l,k,s;var r=0;var t=this.options.maxDegrees||360;var f=this.options.rotation;var q;var a=this.options;var g="radiusX" in this.options?this.options.radiusX:this.options.radius;var d="radiusY" in this.options?this.options.radiusY:this.options.radius;var j=Object.keys(this.options.data);var e=j.length;var u=this.options.data;var m=this.options.chartOptions;var c;r=t/e;var n=function(w){return Math.sqrt(e*w/Math.PI)};for(var v in u){l=parseFloat(u[v])||0;c=m[v];k=c.minValue||0;s=c.maxValue;if(this.options.sizeMode===L.CoxcombChartMarker.SIZE_MODE_RADIUS){var p=new L.LinearFunction(new L.Point(k,0),new L.Point(s,g));var o=new L.LinearFunction(new L.Point(k,0),new L.Point(s,d));a.radiusX=p.evaluate(l);a.radiusY=o.evaluate(l)}else{var b=Math.max(g,d);var h=(Math.PI*Math.pow(b,2))/e;var i=new L.LinearFunction(new L.Point(k,0),new L.Point(s,h),{postProcess:n});a.radiusX=i.evaluate(l);a.radiusY=a.radiusX}a.startAngle=f;a.endAngle=f+r;a.fillColor=c.fillColor;a.color=c.color||"#000";a.rotation=0;a.key=v;a.value=l;a.displayName=c.displayName;a.displayText=c.displayText;q=new L.RadialBarMarker(this._latlng,a);this._bindMouseEvents(q);f=a.endAngle;this.addLayer(q)}}});L.coxcombChartMarker=function(b,a){return new L.CoxcombChartMarker(b,a)};L.RadialBarChartMarker=L.ChartMarker.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.ChartMarker.prototype.initialize.call(this,b,a)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:0,numberOfSides:30,offset:2,barThickness:5,maxDegrees:360,iconSize:new L.Point(50,40)},_loadComponents:function(){var m,l,j;var d=this.options.rotation;var c=this.options.maxDegrees||360;var k;var p=this.options;var e=this.options.radiusX||this.options.radius;var b=this.options.radiusY||this.options.radius;var h=this.options.data;var g=this.options.chartOptions;var o;var a=this.options.barThickness||4;var f=this.options.offset||2;for(var n in h){m=parseFloat(h[n]);o=g[n];l=o.minValue||0;j=o.maxValue||100;var i=new L.LinearFunction(new L.Point(l,0),new L.Point(j,c));d=i.evaluate(m);p.startAngle=this.options.rotation;p.endAngle=this.options.rotation+d;p.fillColor=o.fillColor;p.radiusX=e;p.radiusY=b;p.barThickness=a;p.rotation=0;p.key=n;p.value=m;p.displayName=o.displayName;p.displayText=o.displayText;p.weight=this.options.weight||1;k=new L.RadialBarMarker(this._latlng,p);this._bindMouseEvents(k);this.addLayer(k);e+=a+f;b+=a+f}}});L.radialBarChartMarker=function(b,a){return new L.RadialBarChartMarker(b,a)};L.StackedRegularPolygonMarker=L.ChartMarker.extend({options:{iconSize:new L.Point(50,40)},initialize:function(b,a){L.Util.setOptions(this,a);L.ChartMarker.prototype.initialize.call(this,b,a)},_loadComponents:function(){var h;var c=0;var b=0;var g;var m=this.options;var f=this.options.data;var e=this.options.chartOptions;var k;var j;var i=[];for(j in f){h=parseFloat(f[j]);k=e[j];minValue=k.minValue||0;maxValue=k.maxValue||100;minRadius=k.minRadius||0;maxRadius=k.maxRadius||10;m.fillColor=k.fillColor||this.options.fillColor;m.value=h;m.minValue=minValue;m.maxValue=maxValue;var d=new L.LinearFunction(new L.Point(minValue,minRadius),new L.Point(maxValue,maxRadius));var a=d.evaluate(h);m.radiusX=c+a;m.radiusY=b+a;m.innerRadiusX=c;m.innerRadiusY=b;m.key=j;m.displayName=k.displayName;m.opacity=this.options.opacity||1;m.fillOpacity=this.options.fillOpacity||0.7;m.weight=this.options.weight||1;m.color=k.color||this.options.color;m.displayText=k.displayText;g=new L.RegularPolygonMarker(this._latlng,m);this._bindMouseEvents(g);c=m.radiusX;b=m.radiusY;if(this.options.drawReverse){i.push(g)}else{this.addLayer(g)}}if(this.options.drawReverse){var l=i.pop();while(l){this.addLayer(l);l=i.pop()}}}});L.RadialMeterMarker=L.ChartMarker.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.ChartMarker.prototype.initialize.call(this,b,a)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:180,numberOfSides:30,offset:2,barThickness:5,maxDegrees:180,iconSize:new L.Point(50,40),backgroundStyle:{fill:true,fillColor:"#707070",fillOpacity:0.2,opacity:0.8,color:"#505050"}},_loadComponents:function(){var q,n,v;var r=this.options.rotation;var x=this.options.maxDegrees||360;var t;var b=this.options;var g=this.options.radiusX||this.options.radius;var d=this.options.radiusY||this.options.radius;var y=this.options.data;var s=this.options.chartOptions;var c;var i=this.options.barThickness||4;var f=r;var o=this.options.numSegments||10;var m=x/o;var k;for(var A in y){q=parseFloat(y[A]);c=s[A];k=this.options.displayOptions?this.options.displayOptions[A]:{};n=c.minValue||0;v=c.maxValue||100;var l=v-n;var u=(x/l)*(q-n);var p=r+u;var z=r+x;var h=new L.LinearFunction(new L.Point(r,n),new L.Point(z,v));var w,j;while(f<p){b.startAngle=f;w=Math.min(m,p-f);b.endAngle=f+w;b.fillColor=c.fillColor;b.radiusX=g;b.radiusY=d;b.barThickness=i;b.rotation=0;b.key=A;b.value=q;b.displayName=c.displayName;b.displayText=c.displayText;j=h.evaluate(f+w);for(var a in k){b[a]=k[a].evaluate?k[a].evaluate(j):k[a]}t=new L.RadialBarMarker(this._latlng,b);this._bindMouseEvents(t);this.addLayer(t);f+=w}if(this.options.backgroundStyle){if(f<z){w=z-f;b.endAngle=f+w;b.radiusX=g;b.radiusY=d;b.barThickness=i;b.rotation=0;b.key=A;b.value=q;b.displayName=c.displayName;b.displayText=c.displayText;b.fillColor=null;b.fill=false;b.gradient=false;for(var e in this.options.backgroundStyle){b[e]=this.options.backgroundStyle[e]}j=h.evaluate(f+w);t=new L.RadialBarMarker(this._latlng,b);this.addLayer(t)}}}}});L.LocationModes={LATLNG:function(b,c){var d=function(g,i){var l=L.Util.getFieldValue(b,g);var j=L.Util.getFieldValue(b,i);var h=null;if(l&&j){var k=new L.LatLng(l,j);h={location:k,text:[k.lat.toFixed(3),k.lng.toFixed(3)].join(", "),center:k}}return h};var a=d(this.options.latitudeField,this.options.longitudeField);if(!a&&this.options.fallbackLocationFields){var f=0;var e;while(!a&&f<this.options.fallbackLocationFields.length){e=this.options.fallbackLocationFields[f];a=d(e.latitudeField,e.longitudeField);f++}}return a},GEOHASH:function(a,b){var d=this.options.geohashField?L.Util.getFieldValue(a,this.options.geohashField):b;var e=decodeGeoHash(d);var c;if(e.latitude[2]&&e.longitude[2]){c=new L.LatLngBounds(new L.LatLng(e.latitude[0],e.longitude[0]),new L.LatLng(e.latitude[1],e.longitude[1]))}return{location:c,text:d,center:c.getCenter()}},GWCOUNTRY:function(f,h){var b=this.options.codeField?L.Util.getFieldValue(f,this.options.codeField):h;var j;var c;var e=L.gwNoLookup||{};var k=L.countries||{};var d=L.countryCentroids||{};var i=b.toUpperCase();b=i;var a=i in e;if(a){b=e[i]||b}if(b){j=k[b];c=d[b]}else{console.log("Code not found: "+i)}var g=new L.GeoJSON(j);return{location:g,text:L.GeometryUtils.getName(j)||b,center:c}},COUNTRY:function(d,f){var a=this.options.codeField?L.Util.getFieldValue(d,this.options.codeField):f;var l;var b;var j=L.codeLookup||{};var i=L.alpha2Lookup||{};var h=L.fips2Lookup||{};var k=L.countries||{};var c=L.countryCentroids||{};var g=a.toUpperCase();a=g;if(a.length===2){a=i[g]||h[g]}else{if(a.length===3){a=j[g]||a}}if(a){l=k[a];b=c[a]}else{console.log("Code not found: "+g)}var e=new L.GeoJSON(l);return{location:e,text:L.GeometryUtils.getName(l)||a,center:b}},STATE:function(c,e){var a=this.options.codeField?L.Util.getFieldValue(c,this.options.codeField):e;var h;var b;var i=L.states||{};var f=L.stateCentroids||{};var g=a.toUpperCase();a=g;h=i[a];b=f[a];var d=new L.GeoJSON(h);return{location:d,text:L.GeometryUtils.getName(h)||a,center:b}},GEOJSON:function(c,d){var a=this.options.geoJSONField;var g=a?L.Util.getFieldValue(c,a):c;var b=null;if(g){var e=this;var f=function(i,h){return e.recordToLayer(i,h)};b=L.GeometryUtils.getGeoJSONLocation(g,c,this.options.locationTextField,f)}return b},LOOKUP:function(b,c){var e=this.options.codeField?L.Util.getFieldValue(b,this.options.codeField):c;this._lookupIndex=this._lookupIndex||L.GeometryUtils.indexFeatureCollection(this.options.locationLookup,this.options.locationIndexField||this.options.codeField);var g=this._lookupIndex[e];var a=null;if(!g&&e.indexOf("0")===0){g=this._lookupIndex[e.substring(1)]}if(g){var d=this;var f=function(i,h){return d.recordToLayer(i,h)};a=L.GeometryUtils.getGeoJSONLocation(g,b,this.options.locationTextField,f)}return a},CUSTOM:function(c,e){var a=this.options.codeField;var g=L.Util.getFieldValue(c,a);var f={};var b;f[g]=c;if(this.options.getLocation){var d=this;var h=function(j,i){d.locationToLayer(i,f[j])};b=this.options.getLocation(f,a,[g],h)}return b}};L.DataLayer=L.LayerGroup.extend({includes:L.Mixin.Events,options:{recordsField:"features",locationMode:L.LocationModes.LATLNG,latitudeField:"geometry.coordinates.1",longitudeField:"geometry.coordinates.0",displayField:null,displayOptions:null,layerOptions:{numberOfSides:4,radius:10,weight:1,color:"#000"},showLegendTooltips:true,tooltipOptions:{iconSize:new L.Point(60,50),iconAnchor:new L.Point(-5,50),mouseOverExaggeration:2},setHighlight:function(a){a.weight=a.weight||1;a.fillOpacity=a.fillOpacity||0.5;a.weight*=2;a.fillOpacity/=1.5;return a},unsetHighlight:function(a){a.weight=a.weight||1;a.fillOpacity=a.fillOpacity||0.25;a.weight/=2;a.fillOpacity*=1.5;return a}},initialize:function(b,a){L.Util.setOptions(this,a);L.LayerGroup.prototype.initialize.call(this,a);b=b||{};this._includeFunction=this.options.filter||this.options.includeLayer;this._markerFunction=this.options.getMarker||this._getMarker;this._addChildLayers();this.addData(b)},_addChildLayers:function(){this._boundaryLayer=new L.LayerGroup();this.addLayer(this._boundaryLayer);this._trackLayer=new L.LayerGroup();this.addLayer(this._trackLayer)},_zoomFunction:function(f){var d=this._map;var a=this;var c=d.getZoom();if(this.options.maxZoom&&c>this.options.maxZoom){this.hiddenLayers=[];this.eachLayer(function(e){a.hiddenLayers.push(e);d.removeLayer(e)})}else{if(this.hiddenLayers){while(this.hiddenLayers.length>0){var b=this.hiddenLayers.pop();d.addLayer(b);if(this.options.backgroundLayer&&b.bringToBack){b.bringToBack()}}this.hiddenLayers=null}}},onAdd:function(a){L.LayerGroup.prototype.onAdd.call(this,a);a.on("zoomend",this._zoomFunction,this)},onRemove:function(a){L.LayerGroup.prototype.onRemove.call(this,a);a.off("zoomend",this._zoomFunction,this)},bringToBack:function(){this.invoke("bringToBack");if(this._trackLayer){this._trackLayer.invoke("bringToBack")}if(this._boundaryLayer){this._boundaryLayer.invoke("bringToBack")}},bringToFront:function(){if(this._boundaryLayer){this._boundaryLayer.invoke("bringToFront")}if(this._trackLayer){this._trackLayer.invoke("bringToFront")}this.invoke("bringToFront")},getBounds:function(){var a;this.eachLayer(function(b){if(b.getBounds){if(!a){a=b.getBounds()}else{a.extend(b.getBounds())}}});return a},_getLocation:function(a,b){return this.options.locationMode.call(this,a,b)},_processLocation:function(a){var b=a.center;return b},_styleBoundary:function(c,b,a){if(c.setStyle){var d;if(this.options.boundaryStyle instanceof Function){d=this.options.boundaryStyle.call(this,a,c)}d=d||this.options.boundaryStyle||L.extend({},b,{fillOpacity:0.2,clickable:false});c.setStyle(d)}return c},_addBoundary:function(b,c,a){var d=b.location;var e;if(this.options.includeBoundary){if(d instanceof L.LatLngBounds){d=new L.Rectangle(d)}d=this._styleBoundary(d,c,a);this._boundaryLayer.addLayer(d);e=d}return e},_getLayer:function(b,d,a){var e=this._addBoundary(b,d,a);b=this._processLocation(b);var c;if(b){c=this._markerFunction.call(this,b,d,a);c.boundaryLayer=e}return c},_getMarker:function(c,d,b){var a;if(c){if(d.numberOfSides>=30&&!(d.innerRadius||(d.innerRadiusX&&d.innerRadiusY))){a=new L.CircleMarker(c,d)}else{a=new L.RegularPolygonMarker(c,d)}}return a},_preProcessRecords:function(a){return a},_shouldLoadRecord:function(a){return this._includeFunction?this._includeFunction.call(this,a):true},_loadRecords:function(d){var b;d=this._preProcessRecords(d);for(var c in d){if(d.hasOwnProperty(c)){var a=d[c];a=this.options.deriveProperties?this.options.deriveProperties(a):a;var e=this._shouldLoadRecord(a);if(e){b=this._getLocation(a,c);this.locationToLayer(b,a)}}}},_preloadLocations:function(c){var i=this.options.codeField;var a=[];var f={};for(var d in c){if(c.hasOwnProperty(d)){var e=c[d];var b=L.Util.getFieldValue(e,i);f[b]=e;a.push(b)}}if(this.options.getLocation){var h=this;var g=function(k,j){h.locationToLayer(j,f[k])};this.options.getLocation(f,i,a,g)}},setDisplayOptions:function(a){this.options.displayOptions=a;this.reloadData();return this},setDisplayOption:function(c,b){this.options.displayOptions=this.options.displayOptions||{};if(c in this.options.displayOptions){var a=this.options.displayOptions[c];this.options.displayOptions[c]=L.extend({},a,b)}else{this.options.displayOptions[c]=b}this.reloadData();return this},setFilter:function(a){this.options.filter=a;this.reloadData();return this},setData:function(a){this._data=a;this.reloadData()},reloadData:function(){if(!this._layerIndex){this.clearLayers();this._addChildLayers()}if(this._data){this.addData(this._data)}this.fire("legendChanged",this);return this},addData:function(b){var a=this.options.recordsField!==null&&this.options.recordsField.length>0?L.Util.getFieldValue(b,this.options.recordsField):b;if(this.options.getIndexKey&&!this._layerIndex){this._layerIndex={};this._boundaryIndex={}}if(this.options.locationMode===L.LocationModes.CUSTOM&&this.options.preload){this._preloadLocations(a)}else{this._loadRecords(a)}this._data=b},locationToLayer:function(b,a){var c;c=this.recordToLayer(b,a);if(c){this.addLayer(c)}},_bindMouseEvents:function(g,h,l){var k=this;var m=this.options;var f=m.setHighlight;var e=m.unsetHighlight;var c=m.tooltipOptions;var b=function(r){var q=r.target;var o=this.options||q.options;var n=new L.LegendIcon(l,o,{className:c.className||"leaflet-div-icon",iconSize:c.iconSize,iconAnchor:c.iconAnchor});var s=r.latlng||r.target._latlng;var p=new L.Marker(s,{icon:n});k.addLayer(p);if(k.tooltip){k.removeLayer(k.tooltip);k.tooltip=null}k.tooltip=p;if(f){o=f(o)}if(q.setStyle){q.setStyle(o)}q.isHighlighted=true};var a=function(n){if(k.tooltip){k.tooltip.setLatLng(n.latlng)}};var i=function(p){if(!p.target.isHighlighted){return}p.target.isHighlighted=false;if(k.tooltip){k.removeLayer(k.tooltip);k.tooltip=null}var o=p.target;var n=this.options||o.options;if(e){n=e(n)}if(o.setStyle){o.setStyle(n)}};var j=function(n){n.off("mouseover");n.off("mouseout");n.off("mousemove");n.on({mouseover:b,mouseout:i,mousemove:a})};var d=function(n){if(n.eachLayer){n.eachLayer(function(o){d(o)})}else{j(n)}};d(g)},_getDynamicOptions:function(d){var g=L.Util.extend({},this.options.layerOptions);var c=this.options.displayOptions;var j={};if(c){for(var i in c){var a=c[i];var b=L.Util.getFieldValue(d,i);var h;var f=a.displayText?a.displayText(b):b;j[i]={name:a.displayName,value:f};if(a.styles){g=L.Util.extend(g,a.styles[b]);a.styles[b]=g}else{for(var e in a){h=a[e];g[e]=h.evaluate?h.evaluate(b):(h.call?h.call(this,b):h)}}}}return{layerOptions:g,legendDetails:j}},_getIndexedLayer:function(d,b,f,a){if(this.options.getIndexKey){var c=this.options.getIndexKey.call(this,b,a);if(c in d){layer=d[c];var g=function(h){if(f.radius&&h instanceof L.CircleMarker){h.setRadius(f.radius)}h.setStyle(f);if(h.setLatLng&&h.getLatLng()!==b.center){h.setLatLng(b.center)}else{h.redraw()}};L.Util.updateLayer(layer,g);if(layer.boundaryLayer){layer.boundaryLayer=this._styleBoundary(layer.boundaryLayer,f,a)}}else{layer=this._getLayer(b,f,a);d[c]=layer}if(this.options.getTrack){var e=!layer.trackLayer;layer.trackLayer=this.options.getTrack.call(this,layer,b,layer.trackLayer);if(e){this._trackLayer.addLayer(layer.trackLayer)}}}else{layer=this._getLayer(b,f,a)}return layer},recordToLayer:function(b,a){var g=L.Util.extend({},this.options.layerOptions);var d;var c={};var h=true;var f=this;if(this._includeFunction){h=this._includeFunction.call(this,a)}if(h){var e=this._getDynamicOptions(a);g=e.layerOptions;c=e.legendDetails;if(b&&g){g.title=b.text;d=this._getIndexedLayer(this._layerIndex,b,g,a);if(d){if(this.options.showLegendTooltips){this._bindMouseEvents(d,g,c)}if(this.options.onEachRecord){this.options.onEachRecord.call(this,d,a,b,this)}}}}return d},getLegend:function(a){return this.options.getLegend?this.options.getLegend.call(this,a):this._getLegend(a)},_getLegendElement:function(z){var r;var v;var t=document.createElement("i");var k=z.displayProperties;var c=z.layerOptions;var e=z.ignoreProperties;var a=z.displayTextFunction;var g=z.index;var n=z.numSegments;var q=z.segmentWidth;var m=z.minValue;var w=z.maxValue;L.StyleConverter.applySVGStyle(t,c);var j={evaluate:function(i){return z.breaks[i]}};for(var f in k){if(k.hasOwnProperty(f)&&e.indexOf(f)===-1){valueFunction=k[f];if(valueFunction&&(valueFunction.getBounds||(k.minValue&&k.maxValue))){var h=valueFunction.getBounds?valueFunction.getBounds():null;var A=h?h[0].x:k.minValue;var y=h?h[1].x:k.maxValue;var b=z.breaks?j:new L.LinearFunction(new L.Point(0,A),new L.Point(n,y));r=A;v=y;if(a){r=a(A);v=a(y)}if(g===0){m.innerHTML=r;w.innerHTML=v}var d=(y-A)/n;var l=b.evaluate(g);var B=b.evaluate(g+1);var o=valueFunction.evaluate?valueFunction.evaluate(l):valueFunction(l);var u=valueFunction.evaluate?valueFunction.evaluate(B):valueFunction(B);L.StyleConverter.setCSSProperty(t,f,o);if(f==="fillColor"){if(z.gradient){t.style.cssText+="background-image:linear-gradient(left , "+o+" 0%, "+u+" 100%);background-image:-ms-linear-gradient(left , "+o+" 0%, "+u+" 100%);background-image:-moz-linear-gradient(left , "+o+" 0%, "+u+" 100%);background-image:-webkit-linear-gradient(left , "+o+" 0%, "+u+" 100%);"}else{t.style.cssText+="background-color:"+o+";"}}if(f==="color"){t.style.cssText+="border-top-color:"+o+";border-bottom-color:"+u+";border-left-color:"+o+";border-right-color:"+u+";"}if(f==="weight"){t.style.cssText+="border-top-width:"+o+";border-bottom-width:"+u+";border-left-width:"+o+";border-right-width:"+u+";"}var p=z.minX||(d*g)+A;var s=z.maxX||p+d;if(a&&valueFunction){p=a(p);s=a(s)}t.setAttribute("title",p+" - "+s)}}}t.style.width=q+"px";return t},_getLegend:function(l){l=l||this.options.legendOptions||{};var f=l.className;var u=document.createElement("div");var h=L.DomUtil.create("div","legend",u);var x=l.numSegments||10;var w=l.width||100;var b=this.options.layerOptions||{};var s=b.weight||0;var z=(w/x)-2*s;var C;var t=this.options.displayOptions||{};if(f){L.DomUtil.addClass(h,f)}if(l.title){L.DomUtil.create("legend","",h).innerHTML=l.title}var p=function(i){return i};for(var c in t){if(t.hasOwnProperty(c)){var n=t[c];if(!n.excludeFromLegend){var k=n.displayName||c;C=n.displayText;var a=C?C:p;var o=n.styles;L.DomUtil.create("div","legend-title",h).innerHTML=k;if(o){h.innerHTML+=new L.CategoryLegend(o).generate()}else{var r=L.DomUtil.create("div","data-layer-legend");var v=L.DomUtil.create("div","min-value",r);var E=L.DomUtil.create("div","scale-bars",r);var D=L.DomUtil.create("div","max-value",r);var j=["displayName","displayText","minValue","maxValue"];var F=n.breaks;var e=[];x=l.numSegments||10;if(F){var A=new L.LinearFunction([F[0],0],[F[F.length-1],w]);var g=0;var y=0;for(var B=1;B<F.length;++B){y=A.evaluate(F[B]);e.push(y-g-2*s);g=y}x=e.length}for(var m=0;m<x;++m){var q={displayProperties:n,layerOptions:b,ignoreProperties:j,displayTextFunction:a,index:m,numSegments:x,segmentWidth:z,minValue:v,maxValue:D,gradient:l.gradient};if(F&&e.length>0){q.segmentWidth=e[m];q.segmentSize=e[m];q.minX=F[m];q.maxX=F[m+1];q.breaks=F}var d=this._getLegendElement(q);E.appendChild(d)}h.appendChild(r)}}}}return u.innerHTML}});L.dataLayer=function(b,a){return new L.DataLayer(b,a)};L.MapMarkerDataLayer=L.DataLayer.extend({_getMarker:function(c,b,a){return new L.MapMarker(c,b)}});L.mapMarkerDataLayer=function(b,a){return new L.MapMarkerDataLayer(b,a)};L.MarkerDataLayer=L.DataLayer.extend({initialize:function(b,a){this._markerMap={};L.DataLayer.prototype.initialize.call(this,b,a)},options:{recordsField:"features",locationMode:L.LocationModes.LATLNG,latitudeField:"latitude",longitudeField:"longitude",layerOptions:{icon:null},showLegendTooltips:false},_getMarker:function(c,b,a){if(this.options.setIcon){b.icon=this.options.setIcon.call(this,a,b)}return new L.Marker(c,b)},_getLegendElement:function(a){},_getLegend:function(a){return"<span>No legend available</span>"}});L.markerDataLayer=function(b,a){return new L.MarkerDataLayer(b,a)};L.PanoramioLayer=L.MarkerDataLayer.extend({statics:{UPLOAD_DATE_FORMAT:"DD MMM YYYY",SIZE_BY_DATE:"date",SIZE_BY_POPULARITY:"popularity",SIZE_BY_NONE:"none",SIZES:{square:[60,60],mini_square:[32,32]},NUM_PHOTOS:50}});L.PanoramioLayer=L.PanoramioLayer.extend({initialize:function(a){L.MarkerDataLayer.prototype.initialize.call(this,{},a);this._from=0;this._to=L.PanoramioLayer.NUM_PHOTOS;this._calls=[]},options:{recordsField:"photos",latitudeField:"latitude",longitudeField:"longitude",locationMode:L.LocationModes.LATLNG,showLegendTooltips:false,sizeBy:L.PanoramioLayer.SIZE_BY_DATE,layerOptions:{opacity:1},onEachRecord:function(c,b){var h=b.photo_file_url;var g=b.photo_title;var e=this;var d=b.width;var a=b.height;var f=20000;c.on("click",function(p){var j=document.createElement("div");var n=L.DomUtil.create("div","",j);L.DomUtil.addClass(n,"panoramio-content");var l=L.DomUtil.create("img","photo",n);l.setAttribute("onload","this.style.opacity=1;");l.setAttribute("src",h);l.style.width=d+"px";var o=L.DomUtil.create("div","photo-info",n);o.style.width=(d-20)+"px";o.innerHTML="<span>"+g+'</span><a class="photo-link" target="_blank" href="'+b.photo_url+'"><img src="http://www.panoramio.com/img/glass/components/logo_bar/panoramio.png" style="height: 14px;"/></a>';var k=L.DomUtil.create("a","author-link",n);k.setAttribute("target","_blank");k.setAttribute("href",b.owner_url);k.innerHTML="by "+b.owner_name;var m=new L.DivIcon({className:"photo-details",html:j.innerHTML,iconAnchor:[d/2,a/2]});var i=new L.Marker(p.target._latlng,{icon:m,zIndexOffset:f});i.on("click",function(q){e.removeLayer(q.target)});c.viewedImage=i;e.viewedImage=i;e.addLayer(i)});if(this.options.onEachPhoto){this.options.onEachPhoto.call(this,c,b)}},setIcon:function(b,d){var g=L.Util.getFieldValue(b,"photo_title");var e=null;if(this._sizeFunction){e=this._sizeFunction.evaluate(b.index)}var a=e?new L.Point(e,e):L.PanoramioLayer.SIZES[this.options.size];var c=b.photo_file_url.replace("/medium/","/"+this.options.size+"/");var f=new L.DivIcon({iconSize:a,className:"",html:'<img class="photo" onload="this.style.opacity=1" title="'+g+'" src="'+c+'"/>'});return f},updateInterval:300000,size:"square",attributionText:'Photos provided by <a href="http://www.panoramio.com"><img src="http://www.panoramio.com/img/glass/components/logo_bar/panoramio.png" style="height: 10px;"/></a>.  Photos provided by <a href="http://www.panoramio.com"><img src="http://www.panoramio.com/img/glass/components/logo_bar/panoramio.png" style="height: 10px;"/></a> are under the copyright of their owners',refreshEvents:"moveend",photoSet:"public"},includes:L.Mixin.Events,onAdd:function(b){L.DataLayer.prototype.onAdd.call(this,b);if(b.attributionControl){b.attributionControl.addAttribution(this.options.attributionText)}var a=this;var c=function(f){a._from=0;a._to=L.PanoramioLayer.NUM_PHOTOS;a.fire("requestingPhotos");if(a._call){clearTimeout(a._call)}var d=function(){a.requestPhotos()};a._call=setTimeout(d,1000)};this.requestPhotos();this._interval=setInterval(c,this.options.updateInterval);this._resetFunction=c;b.on(this.options.refreshEvents,c)},onRemove:function(a){L.DataLayer.prototype.onRemove.call(this,a);if(a.attributionControl){a.attributionControl.removeAttribution(this.options.attributionText)}if(this._interval){clearInterval(this._interval);this._interval=null}a.off(this.options.refreshEvents,this._resetFunction)},calculateSizeByDate:function(f){var g=f.photos;var a=[];for(var d=0;d<g.length;++d){var b=g[d];var e=moment(b.upload_date,L.PanoramioLayer.UPLOAD_DATE_FORMAT);a.push(e);g[d].index=e}a.sort(function(i,h){return i-h});var c=L.PanoramioLayer.SIZES[this.options.size][0];this._sizeFunction=new L.LinearFunction([a[0],c/2],[a[a.length-1],c]);return f},calculateSizeByPopularity:function(c){var d=c.photos;for(var b=0;b<d.length;++b){d[b].index=b}var a=L.PanoramioLayer.SIZES[this.options.size][0];this._sizeFunction=new L.LinearFunction([0,a/2],[d.length,a]);return c},next:function(){this._from=this._to;this._to=this._from+L.PanoramioLayer.NUM_PHOTOS;this.requestPhotos()},previous:function(){this._to=this._from;this._from=this._from-L.PanoramioLayer.NUM_PHOTOS;this.requestPhotos()},requestJsonp:function(b,e,g){var a=this,c="function"+new Date().getTime(),f=[];e.callback="window.LeafletDvfJsonpCallbacks."+c;for(var d in e){if(e.hasOwnProperty(d)){f.push(d+"="+encodeURIComponent(e[d]))}}b+=(b.indexOf("?")>0?"&":"?")+f.join("&");if(typeof window.LeafletDvfJsonpCallbacks==="undefined"){window.LeafletDvfJsonpCallbacks={}}window.LeafletDvfJsonpCallbacks[c]=function(h){g.call(a,h);delete window.LeafletDvfJsonpCallbacks[c]};if(this.jsonpScript){document.head.removeChild(this.jsonpScript);this.jsonpScript=null}this.jsonpScript=document.createElement("script");this.jsonpScript.setAttribute("type","text/javascript");this.jsonpScript.setAttribute("async","true");this.jsonpScript.setAttribute("src",b);document.head.appendChild(this.jsonpScript);return{abort:function(){if(c in window.LeafletDvfJsonpCallbacks){window.LeafletDvfJsonpCallbacks[c]=function(){delete window.LeafletDvfJsonpCallbacks[c]}}}}},requestPhotos:function(){var e=this;var d=this._map.getBounds();var b=d.getSouthWest();var a=d.getNorthEast();while(e._calls.length>0){e._calls.pop().abort()}var c=this.requestJsonp("http://www.panoramio.com/map/get_panoramas.php",{set:this.options.photoSet,from:e._from,to:e._to,minx:b.lng,miny:b.lat,maxx:a.lng,maxy:a.lat,size:"medium",mapfilter:"true"},function(f){e._count=f.count;if(moment&&e.options.sizeBy===L.PanoramioLayer.SIZE_BY_DATE){f=e.calculateSizeByDate(f)}else{if(e.options.sizeBy===L.PanoramioLayer.SIZE_BY_POPULARITY){f=e.calculateSizeByPopularity(f)}}e.fire("photosAvailable",f);e.clearLayers();e.addData(f)});e._calls.push(c)}});L.panoramioLayer=function(a){return new L.PanoramioLayer(a)};L.GeohashDataLayer=L.DataLayer.extend({initialize:function(b,a){L.DataLayer.prototype.initialize.call(this,b,a)},options:{recordsField:"features",locationMode:L.LocationModes.GEOHASH,geohashField:"geohash",displayField:null,displayOptions:null,layerOptions:{weight:1,color:"#000"},getIndexKey:function(b,a){return b.text}},_getLayer:function(c,b,a){return new L.Rectangle(c.location,b)}});L.geohashDataLayer=function(b,a){return new L.GeohashDataLayer(b,a)};L.ChoroplethDataLayer=L.DataLayer.extend({initialize:function(b,a){L.DataLayer.prototype.initialize.call(this,b,a)},options:{recordsField:"features",locationMode:L.LocationModes.COUNTRY,codeField:"ISO",displayField:null,displayOptions:null,layerOptions:{weight:1,color:"#000"},maxZoom:16,backgroundLayer:true},_getLayer:function(b,c,a){if(b.location instanceof L.LatLng){b.location=this._markerFunction.call(this,b.location,c,a)}else{if(b.location instanceof L.LatLngBounds){b.location=new L.Rectangle(b.location,c)}}if(b.location.setStyle){c.gradient=b.location instanceof L.Polyline?false:c.gradient;b.location.setStyle(c)}return b.location}});L.choroplethDataLayer=function(b,a){return new L.ChoroplethDataLayer(b,a)};L.ChartDataLayer=L.DataLayer.extend({options:{showLegendTooltips:false},initialize:function(b,a){L.DataLayer.prototype.initialize.call(this,b,a)},_getLayer:function(a,g,f){var c=this._addBoundary(a,g,f);a=this._processLocation(a);var d=this.options.chartOptions;var b=this.options.tooltipOptions;var i={};i=g;i.data={};i.chartOptions=d;for(var h in this.options.chartOptions){i.data[h]=this.options.getFieldValue?this.options.getFieldValue.call(this,f,h):L.Util.getFieldValue(f,h)}for(h in b){i[h]=b[h]}var e;if(a){e=this._getMarker(a,i);e.boundaryLayer=c}return e},_getMarker:function(b,a){},_getLegend:function(b){var a=L.DataLayer.prototype._getLegend.call(this,b);var c=new L.CategoryLegend(this.options.chartOptions);b=b||this.options.legendOptions;return c.generate(b)}});L.BarChartDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.BarChartMarker(b,a)}});L.barChartDataLayer=function(b,a){return new L.BarChartDataLayer(b,a)};L.RadialBarChartDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.RadialBarChartMarker(b,a)}});L.radialBarChartDataLayer=function(b,a){return new L.RadialBarChartDataLayer(b,a)};L.PieChartDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.PieChartMarker(b,a)}});L.pieChartDataLayer=function(b,a){return new L.PieChartDataLayer(b,a)};L.CoxcombChartDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.CoxcombChartMarker(b,a)}});L.coxcombChartDataLayer=function(b,a){return new L.CoxcombChartDataLayer(b,a)};L.StackedRegularPolygonDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.StackedRegularPolygonMarker(b,a)}});L.stackedRegularPolygonDataLayer=function(b,a){return new L.StackedRegularPolygonDataLayer(b,a)};L.StackedPieChartDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.StackedPieChartMarker(b,a)}});L.stackedPieChartDataLayer=function(b,a){return new L.StackedPieChartDataLayer(b,a)};L.RadialMeterMarkerDataLayer=L.DataLayer.extend({options:{showLegendTooltips:false},initialize:function(b,a){L.DataLayer.prototype.initialize.call(this,b,a)},_getLayer:function(a,g,f){this._addBoundary(a,g);a=this._processLocation(a);var d=this.options.chartOptions;var b=this.options.tooltipOptions;var c=this.options.displayOptions;var i={};i=g;i.data={};i.chartOptions=d;i.displayOptions=c;for(var h in this.options.chartOptions){i.data[h]=L.Util.getFieldValue(f,h)}for(h in b){i[h]=b[h]}var e;if(a){e=this._getMarker(a,i)}return e},_getMarker:function(b,a){return new L.RadialMeterMarker(b,a)}});L.radialMeterMarkerDataLayer=function(b,a){return new L.RadialMeterMarkerDataLayer(b,a)};L.CalloutLine=L.Path.extend({statics:{LINESTYLE:{ARC:"arc",ANGLE:"angle",STRAIGHT:"straight"},DIRECTION:{NE:"ne",NW:"nw",SE:"se",SW:"sw"}}});L.CalloutLine=L.CalloutLine.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.Path.prototype.initialize.call(this,a);this._latlng=b},options:{size:new L.Point(60,30),position:new L.Point(0,0),color:"#FFFFFF",opacity:1,weight:2,fillColor:"#000000",fill:false,gradient:false,dropShadow:false,direction:L.CalloutLine.DIRECTION.NE,lineStyle:L.CalloutLine.LINESTYLE.ANGLE,lineCap:"butt",lineJoin:"miter",arrow:false},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints()},getEndPoint:function(){this.projectLatlngs();return this._points[this._points.length-1]},_getPathAngle:function(){return new L.SVGPathBuilder(this._points,[],{closePath:false}).build(6)},_getPathArc:function(){var f=(this.options.direction||L.CalloutLine.DIRECTION.NE).toLowerCase();var e=f[0];var a=e==="n"?-1:1;var c=this._points[0];var b=this._points[this._points.length-1];var d=["M",c.x,",",c.y," Q",c.x,",",c.y+a*this.options.size.y," ",b.x,",",b.y];return d.join(" ")},_getPoints:function(){var k=this._point.x+this.options.position.x;var i=this._point.y+this.options.position.y;var a=this.options.size.x;var o=this.options.size.y;var j=(this.options.direction||L.CalloutLine.DIRECTION.NE).toLowerCase();var n=[];var c=j[1];var g=j[0];var f=c==="w"?-1:1;var b=g==="n"?-1:1;n.push(new L.Point(k,i));var l=i+b*o;var e=a/2;var d=Math.atan(o/e);if(this.options.lineStyle===L.CalloutLine.LINESTYLE.ARC){d=Math.atan(Math.pow(o,2)/e)}else{if(this.options.lineStyle===L.CalloutLine.LINESTYLE.STRAIGHT){d=Math.atan(o/a)}}this._angle=d;if(this.options.lineStyle!==L.CalloutLine.LINESTYLE.STRAIGHT){var m=new L.Point(k+f*e,l);n.push(m)}var h=new L.Point(k+f*a,l);n.push(h);return n},getBounds:function(){var f=this._map,b=f.project(this._latlng),c=new L.Point(b.x+this.options.position.x,b.y+this.options.position.y),e=new L.Point(c.x+this.options.size.x,c.y-this.options.size.y),a=f.unproject(c),d=f.unproject(e);return new L.LatLngBounds(a,d)},setLatLng:function(a){this._latlng=a;this.redraw()},getLatLng:function(){return this._latlng},getPathString:function(){this._path.setAttribute("shape-rendering","geometricPrecision");var a=this.options.lineStyle||L.CalloutLine.LINESTYLE.ANGLE;var b="";if(a===L.CalloutLine.LINESTYLE.ANGLE||a===L.CalloutLine.LINESTYLE.STRAIGHT){b+=this._getPathAngle()}else{b+=this._getPathArc()}return b}});L.calloutLine=function(b,a){return new L.CalloutLine(b,a)};L.Callout=L.LayerGroup.extend({options:{color:"#FFFFFF",fillColor:"#FFFFFF"},initialize:function(b,a){L.Util.setOptions(this,a);L.LayerGroup.prototype.initialize.call(this,a);this._latlng=b},onAdd:function(a){L.LayerGroup.prototype.onAdd.call(this,a);this.addLayers()},onRemove:function(a){L.LayerGroup.prototype.onRemove.call(this,a);this.clearLayers()},addArrow:function(b,g,e){if(this.options.arrow){b=L.LatLng.RAD_TO_DEG*b;var d=this.options.numberOfSides||3;var f=this.options.radius||6;var a=180/d;var c={se:a+b,sw:180+a-b,nw:180+a+b,ne:a-b};var i=c[g];var h=new L.RegularPolygonMarker(this._latlng,{position:e,numberOfSides:d,rotation:i,fillColor:this.options.fillColor,color:this.options.color,gradient:this.options.gradient,weight:this.options.weight,opacity:this.options.opacity,fillOpacity:this.options.fillOpacity,radius:f,lineCap:"butt",lineJoin:"miter"});this.addLayer(h)}},addLine:function(){var a={};for(var b in this.options){if(b!=="icon"){a[b]=this.options[b]}}var c=new L.CalloutLine(this._latlng,a);this.addLayer(c);return c},addIcon:function(i,d){var j=this.options.size;var h=this.options.icon;var f=h.options.iconSize;var g=i[0];var c=i[1];var e=c==="w"?f.x+j.x-d.x:-1*(j.x+d.x);var a=g==="n"?f.y/2+j.y-d.y:-1*(-f.y/2+j.y+d.y);h.options.iconAnchor=new L.Point(e,a);var b=new L.Marker(this._latlng,{icon:h});this.addLayer(b)},addLayers:function(){var b=(this.options.direction||"ne").toLowerCase();var a=this.options.position||new L.Point(0,0);var c;c=this.addLine();this.addIcon(b,a);this.addArrow(c._angle,b,a)}});L.callout=function(b,a){return new L.Callout(b,a)};L.FlowLine=L.DataLayer.extend({statics:{LINE_FUNCTION:function(a,c,b){return new L.Polyline([a,c],b)},LINE_FUNCTION_INTERPOLATED:function(a,h,c){var g=this._map.latlngToLayerPoint(a);var d=this._map.latlngToLayerPoint(h);var b=new L.LinearFunction(g,d);var f=Math.ceil(g.distanceTo(d)/c.interpolationOptions.segmentLength);var e=b.samplePoints(f)}}});L.FlowLine=L.FlowLine.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.DataLayer.prototype.initialize.call(this,b,a)},options:{getLine:L.FlowLine.LINE_FUNCTION,showLegendTooltips:true,setHighlight:function(a){a.opacity=a.opacity||1;a.opacity/=1.5;return a},unsetHighlight:function(a){a.opacity=a.opacity||0.66;a.opacity*=1.5;return a}},onEachSegment:function(d,c,i){var g={};if(this.options.timeField){var q=L.Util.getFieldValue(d,this.options.timeField);var p=L.Util.getFieldValue(c,this.options.timeField);var o=this.options.timeFormat;var n=o?moment(q,o):moment(q);var m=o?moment(p,o):moment(p);var e=m.valueOf()-n.valueOf();g.time=e}for(var r in this.options.displayOptions){var l=L.Util.getFieldValue(d,r);var k=L.Util.getFieldValue(c,r);var j=k-l;var a=(j/l)*100;g[r]={from:l,to:k,change:j,percentChange:a};if(g.time){g[r].changeOverTime=j/g.time}}var b=i.getLatLngs();var f=b[0].distanceTo(b[1]);var h;if(g.time){h=f/(g.time*1000)}if(this.options.onEachSegment){this.options.onEachSegment.call(this,d,c,i,g,f,h)}},_loadRecords:function(c){var d=[];this._lastRecord=null;for(var b in c){if(c.hasOwnProperty(b)){var a=c[b];a=this.options.deriveProperties?this.options.deriveProperties(a):a;d=this._addRecord(a,b,d)}}while(d.length>0){this.addLayer(d.pop())}},addRecord:function(a){this._addRecord(a);return this},_addRecord:function(d,e,h){var c=this._getLocation(d,e);var f=this.options.layerOptions;if(c){var b=this._getLayer(c,f,d);var a;var g=true;if(this.options.includeLayer){g=this.options.includeLayer(d)}if(this._lastRecord&&g){f=this._getDynamicOptions(this._lastRecord);a=this.options.getLine.call(this,this._lastMarker.getLatLng(),b.getLatLng(),f.layerOptions);this.addLayer(a);if(this.options.showLegendTooltips){this._bindMouseEvents(a,f.layerOptions,f.legendDetails)}this.onEachSegment(this._lastRecord,d,a)}if(g){this._lastRecord=d;this._lastMarker=b}}return h}});L.flowLine=function(b,a){return new L.FlowLine(b,a)};L.ArcedFlowLine=L.FlowLine.extend({options:{getLine:function(a,c,b){return new L.ArcedPolyline([a,c],b)}},initialize:function(b,a){L.FlowLine.prototype.initialize.call(this,b,a)}});L.arcedFlowLine=function(b,a){return new L.ArcedFlowLine(b,a)};L.ArcedPolyline=L.Path.extend({includes:TextFunctions,initialize:function(a,b){L.Path.prototype.initialize.call(this,b);this._latlngs=a},options:{distanceToHeight:new L.LinearFunction([0,5],[1000,200]),color:"#FFFFFF",opacity:1,weight:1,fillColor:"#000000",fill:false,gradient:false,dropShadow:false,optimizeSpeed:false},projectLatlngs:function(){this._points=[];for(var a=0;a<this._latlngs.length;++a){this._points.push(this._map.latLngToLayerPoint(this._latlngs[a]))}},getBounds:function(){var b=new L.LatLngBounds();for(var a=0;a<this._latlngs.length;++a){b.extend(this._latlngs[a])}return b},setLatLngs:function(a){this._latlngs=a;this.redraw()},getLatLngs:function(){return this._latlngs},drawSegment:function(b,a){var e=Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2));var d=this.options.distanceToHeight.evaluate(e);var c=["M",b.x,",",b.y," C",b.x,",",b.y-d," ",a.x,",",a.y-d," ",a.x,",",a.y];return c.join(" ")},getPathString:function(){if(this.options.optimizeSpeed){this._path.setAttribute("shape-rendering","optimizeSpeed")}var b=[];for(var a=0;a<this._points.length-1;++a){b.push(this.drawSegment(this._points[a],this._points[a+1]))}return b.join("")}});L.arcedPolyline=function(a,b){return new L.ArcedPolyline(a,b)};L.Control.Legend=L.Control.extend({options:{position:"bottomright",autoAdd:true},onAdd:function(d){var c="leaflet-control-legend",a=L.DomUtil.create("div",c);var b=this;if(this.options.autoAdd){d.on("layeradd",function(g){var f=g.layer;b.addLayer(f)});d.on("layerremove",function(g){var f=g.layer;b.removeLayer(f)})}this.toggleSize=L.bind(this.toggleSize,this);L.DomEvent.addListener(a,"mouseover",this.toggleSize).addListener(a,"mouseout",this.toggleSize).addListener(a,"touchstart",this.toggleSize).addListener(a,"touchend",this.toggleSize).addListener(a,"click",L.DomEvent.stopPropagation).addListener(a,"click",L.DomEvent.preventDefault);return a},clear:function(){this._container.innerHTML=""},toggleSize:function(){if(L.DomUtil.hasClass(this._container,"larger")){L.DomUtil.removeClass(this._container,"larger")}else{L.DomUtil.addClass(this._container,"larger")}},redrawLayer:function(a){this.removeLayer(a);this.addLayer(a)},addLayer:function(a){var c=L.Util.stamp(a);var b=this;if(a.getLegend){this.addLegend(c,a.getLegend());a.on("legendChanged",function(){b.redrawLayer(a)})}},removeLayer:function(b){var c=L.Util.stamp(b);if(b.getLegend){var a=document.getElementById(c);a.parentNode.removeChild(a);b.off("legendChanged")}},addLegend:function(d,b){var a=this._container,c=document.getElementById(d);if(!c){c=L.DomUtil.create("div","",a);c.id=d}c.innerHTML=b}});L.control.legend=function(a){return new L.Control.Legend(a)};