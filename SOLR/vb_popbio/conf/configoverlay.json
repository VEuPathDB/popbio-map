{
  "requestHandler": {
    "/smplGeoclust": {
      "name": "/smplGeoclust",
      "class": "solr.SearchHandler",
      "defaults": {
        "echoParams": "none",
        "df": "text"
      },
      "invariants": {
        "wt": "json",
        "json.nl": "map",
        "rows": 0,
        "json": "{\"filter\":[\"bundle:pop_sample\",\"has_geodata:true\",\"${bbox}\"],\"facet\":{\"geo\":{\"type\":\"terms\",\"field\":\"${geo:geohash_2}\",\"limit\":2000,\"mincount\":1,\"sort\":{\"count\":\"desc\"},\"facet\":{\"ltAvg\":\"avg(geo_coords_ll_0_coordinate)\",\"ltMin\":\"min(geo_coords_ll_0_coordinate)\",\"ltMax\":\"max(geo_coords_ll_0_coordinate)\",\"lnAvg\":\"avg(geo_coords_ll_1_coordinate)\",\"lnMin\":\"min(geo_coords_ll_1_coordinate)\",\"lnMax\":\"max(geo_coords_ll_1_coordinate)\",\"term\":{\"type\":\"terms\",\"field\":\"${term:species_category}\",\"limit\":2000,\"mincount\":1}}}}}"
      }
    },
    "/irGeoclust": {
      "name": "/irGeoclust",
      "class": "solr.SearchHandler",
      "defaults": {
        "echoParams": "none",
        "df": "text"
      },
      "invariants": {
        "wt": "json",
        "json.nl": "map",
        "rows": 0,
        "json": "{\"filter\":[\"bundle:pop_sample_phenotype\",\"has_geodata:true\",\"${bbox}\"],\"facet\":{\"geo\":{\"type\":\"terms\",\"field\":\"${geo:geohash_2}\",\"limit\":2000,\"mincount\":1,\"sort\":{\"count\":\"desc\"},\"facet\":{\"ltAvg\":\"avg(geo_coords_ll_0_coordinate)\",\"ltMin\":\"min(geo_coords_ll_0_coordinate)\",\"ltMax\":\"max(geo_coords_ll_0_coordinate)\",\"lnAvg\":\"avg(geo_coords_ll_1_coordinate)\",\"lnMin\":\"min(geo_coords_ll_1_coordinate)\",\"lnMax\":\"max(geo_coords_ll_1_coordinate)\",\"irAvg\":\"avg(phenotype_rescaled_value_f)\",\"term\":{\"type\":\"terms\",\"field\":\"${term:species_category}\",\"limit\":2000,\"mincount\":1}}}}}"
      }
    },
    "/abndGeoclust": {
      "name": "/abndGeoclust",
      "class": "solr.SearchHandler",
      "defaults": {
        "echoParams": "none",
        "df": "text"
      },
      "invariants": {
        "wt": "json",
        "json.nl": "map",
        "rows": 0,
        "facet.threads": 2,
        "json": "{ \"filter\": [ \"bundle:pop_sample\", \"has_abundance_data_b:true\", \"has_geodata:true\", \"${bbox}\"], \"facet\": { \"geo\": { \"type\": \"terms\", \"field\": \"${geo:geohash_2}\", \"limit\": 2000, \"mincount\": 1, \"sort\": { \"count\": \"desc\"}, \"facet\": { \"ltAvg\": \"avg(geo_coords_ll_0_coordinate)\", \"ltMin\": \"min(geo_coords_ll_0_coordinate)\", \"ltMax\": \"max(geo_coords_ll_0_coordinate)\", \"lnAvg\": \"avg(geo_coords_ll_1_coordinate)\", \"lnMin\": \"min(geo_coords_ll_1_coordinate)\", \"lnMax\": \"max(geo_coords_ll_1_coordinate)\", \"avgSmp\": \"avg(sample_size_i)\", \"avgDur\": \"avg(collection_duration_days_i)\", \"avgAbnd\": \"avg(div(sample_size_i,collection_duration_days_i))\", \"term\": { \"type\": \"terms\", \"field\": \"${term:species_category}\", \"limit\": 2000, \"mincount\": 1, \"sort\": { \"count\": \"desc\"}, \"facet\": { \"avgAbnd\": \"avg(div(sample_size_i,collection_duration_days_i))\", \"avgSmpl\": \"avg(sample_size_i)\", \"avgDur\": \"avg(collection_duration_days_i)\"}}}}}}"
      }
    },
    "/abndPalette": {
      "name": "/abndPalette",
      "class": "solr.SearchHandler",
      "defaults": {
        "echoParams": "all",
        "df": "text"
      },
      "invariants": {
        "wt": "json",
        "json.nl": "map",
        "rows": 0,
        "json": "{ \"filter\": [ \"bundle:pop_sample\", \"has_abundance_data_b:true\", \"has_geodata:true\"], \"facet\": { \"minAbnd\": \"min(log(div(sample_size_i,collection_duration_days_i)))\", \"maxAbnd\": \"max(log(div(sample_size_i,collection_duration_days_i)))\", \"geo\": { \"type\": \"terms\", \"field\": \"${geo:geohash_2}\", \"limit\": 2000, \"mincount\": 1, \"sort\": { \"count\": \"desc\"}, \"facet\": { \"terms\": { \"type\": \"terms\", \"field\": \"${term:species_category}\", \"limit\": 2000, \"mincount\": 1, \"sort\": { \"count\": \"desc\"}}}}}}"
      }
    },
    "/smplPalette": {
      "name": "/smplPalette",
      "class": "solr.SearchHandler",
      "defaults": {
        "echoParams": "all",
        "df": "text"
      },
      "invariants": {
        "wt": "json",
        "json.nl": "map",
        "rows": 0,
        "json": "{\"filter\":[\"bundle:pop_sample\",\"has_geodata:true\"],\"facet\":{\"geo\":{\"type\":\"terms\",\"field\":\"${geo:geohash_2}\",\"limit\":2000,\"mincount\":1,\"sort\":{\"count\":\"desc\"},\"facet\":{\"terms\":{\"type\":\"terms\",\"field\":\"${term:species_category}\",\"limit\":2000,\"mincount\":1,\"sort\":{\"count\":\"desc\"}}}}}}"
      }
    },
    "/irPalette": {
      "name": "/irPalette",
      "class": "solr.SearchHandler",
      "defaults": {
        "echoParams": "all",
        "df": "text"
      },
      "invariants": {
        "wt": "json",
        "json.nl": "map",
        "rows": 0,
        "json": "{\"filter\":[\"bundle:pop_sample_phenotype\",\"phenotype_type_s:insecticide*resistance\",\"has_geodata:true\"],\"facet\":{\"geo\":{\"type\":\"terms\",\"field\":\"${geo:geohash_2}\",\"limit\":2000,\"mincount\":1,\"sort\":{\"count\":\"desc\"},\"facet\":{\"terms\":{\"type\":\"terms\",\"field\":\"${term:species_category}\",\"limit\":2000,\"mincount\":1,\"sort\":{\"count\":\"desc\"}}}}}}"
      }
    },
    "/violinStats": {
      "name": "/irPalette",
      "class": "solr.SearchHandler",
      "defaults": {
        "echoParams": "all",
        "df": "text"
      },
      "invariants": {
        "wt": "json",
        "json.nl": "map",
        "rows": 0,
        "json": "{\"filter\":[\"bundle:pop_sample_phenotype\",\"phenotype_type_s:insecticide*resistance\",\"has_geodata:true\"],\"facet\":{\"geo\":{\"type\":\"terms\",\"field\":\"${geo:geohash_2}\",\"limit\":2000,\"mincount\":1,\"sort\":{\"count\":\"desc\"},\"facet\":{\"terms\":{\"type\":\"terms\",\"field\":\"${term:species_category}\",\"limit\":2000,\"mincount\":1,\"sort\":{\"count\":\"desc\"}}}}}}"
      }
    }
  }
}

